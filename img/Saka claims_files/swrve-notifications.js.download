!function(){var e={78959:function(e){window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist",n(n.s=11)}([function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(n(6)),s=function(){function e(){}return e.infoMsg=function(e){this.parseMsg(o.messageConfig.types.info,e)},e.warnMsg=function(e){this.parseMsg(o.messageConfig.types.warn,e)},e.errorMsg=function(e){this.parseMsg(o.messageConfig.types.error,e)},e.parseMsg=function(e,t){var n="string"!=typeof t?t:void 0,r=o.messageConfig.title+" "+e+": "+(n?"":t),s=null;switch(e){case o.messageConfig.types.info:return s=console.info,!i.default.ProdMode&&(this.outputMsg(s,r,n),!0);case o.messageConfig.types.warn:return s=console.warn,!i.default.ProdMode&&(this.outputMsg(s,r,n),!0);case o.messageConfig.types.error:return s=console.error,this.outputMsg(s,r,n),!0}},e.outputMsg=function(e,t,n){n?(console.group(t),Array.isArray(n)?n.forEach((function(t){e(t)})):e(n),console.groupEnd()):e(t)},e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.messageConfig={title:"Swrve WebSDK",types:{error:"Error",info:"Info",warn:"Warning"}},t.webWorkerDbName="SwrveWebWorkerDB",t.swrveDefaultDBName="SwrveWebSDK",t.swrveDefaultDBVersion=1,t.swrveServiceWorkerName="SwrveWorker.js",t.swrveVersion=3,t.defaultFlushFrequency=6e4,t.defaultFlushRefreshDelay=5e3},function(e,t,n){"use strict";function r(e){return null==e}Object.defineProperty(t,"__esModule",{value:!0}),t.isNil=r,t.isPresent=function(e){return!r(e)},t.noOp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Function()}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(7));t.nowInUtcTime=function(){return o.default.dateToUTCDate(new Date).getTime()}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,a)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(15),a=i(n(16)),u=i(n(17)),c=i(n(19)),f=i(n(7)),l=n(12),p=i(n(20)),h=n(2),d=i(n(0)),v=n(1),g=i(n(24)),y=i(n(9)),b=i(n(26)),m=i(n(27)),w=i(n(28)),S=i(n(5)),_=n(3),I=n(13),E=function(){function e(e){this.onSwrveLoadedCallback=null,this.flushConfig={flushFrequency:v.defaultFlushFrequency,flushRefreshDelay:v.defaultFlushRefreshDelay},this.eventFactory=new u.default,this.config=new a.default(e),this.localStorageClient=new S.default}return Object.defineProperty(e.prototype,"Config",{get:function(){return this.config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SwrvePushManager",{get:function(){return this.swrvePushManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DeviceId",{get:function(){return this.getPersistentDeviceId()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getUserID",{get:function(){return this.profile.UserId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"InstallDate",{get:function(){return this.getPersistentInstallDate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"InitDate",{get:function(){return this.profile.FirstSession.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"WebPushAPIKey",{get:function(){return this.webPushAPIKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsSessionStarted",{get:function(){return null!=this.sessionStartedAt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"LastSession",{get:function(){return this.profile.LastSession.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Profile",{get:function(){return this.profile},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SessionStartedAt",{get:function(){return this.sessionStartedAt},enumerable:!0,configurable:!0}),e.createInstance=function(t){return e.instance=e.instance||new e(t),e.instance},e.getCurrentInstance=function(){return e.instance},e.prototype.init=function(){return r(this,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:if(!b.default.isTrackingSupported())throw Error("The configuration shown in the User Agent is not officially supported");d.default.infoMsg("Starting New SwrveSDK instance"),this.initializePersistentData(),r.label=1;case 1:return r.trys.push([1,6,,7]),[4,this.initializeIdentity()];case 2:return r.sent(),this.profile.IsIdentityResolved?(d.default.infoMsg("Profile Resolved: "+this.profile.UserId+" for extUserId: "+this.profile.ExternalUserId),(t=this.hasSessionRestored())?(d.default.infoMsg("Session is still going, restoring last session"),this.sessionStartedAt=this.profile.LastSession):this.sessionStartedAt=_.nowInUtcTime(),d.default.infoMsg("Generating Session Token"),this.sessionToken=this.generateSessionToken(this.sessionStartedAt.toString()),d.default.infoMsg("Session Token Generated: "+this.sessionToken),d.default.infoMsg("Initializing Event Manager"),this.eventQueueManager=new g.default(this.config,this.flushConfig,this.getUserID,this.sessionToken),t||this.sessionStart(),d.default.infoMsg("Fetching synchronous campaigns and resources"),[4,this.initCampaignsAndResources()]):[3,4];case 3:return r.sent(),this.eventQueueManager.init(),null==this.profile.LastSession&&this.eventInternal(l.eventTypes.namedEvent,{name:l.firstSessionEventName}),d.default.infoMsg("Sending Client Info"),this.sendClientInfo(),d.default.infoMsg("Initializing PushManager with WebPushAPIKey: "+this.WebPushAPIKey),this.swrvePushManager=new w.default(this.config,this.WebPushAPIKey),this.SwrvePushManager.init(),this.config.AutoPushSubscribe?(d.default.infoMsg("autoPushSubscribe: ON"),this.swrvePushManager.registerPush()):d.default.infoMsg("SwrvePushManager Will not initialize. Auto subscribe is disabled"),window.onbeforeunload=function(){e.pageStateHandler()},window.onblur=function(){e.pageStateHandler()},h.isPresent(this.onSwrveLoadedCallback)&&this.onSwrveLoadedCallback(null),[3,5];case 4:throw e.shutdown(),new Error("User Profile could not be resolved");case 5:return[3,7];case 6:return n=r.sent(),d.default.errorMsg(n),this.onSwrveLoadedCallback(n.toString()),[3,7];case 7:return[2]}}))}))},e.shutdown=function(){if(!h.isNil(this.instance)){var e=this.instance.eventQueueManager;h.isNil(e)||e.shutdown(),this.pageStateHandler(),Object.setPrototypeOf(this.instance,null),this.instance=null}},e.prototype.initCampaignsAndResources=function(){return r(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return this.campaignManager=new p.default,[4,this.campaignManager.getInfoForSession()];case 1:return(e=t.sent())&&(this.flushConfig={flushFrequency:e.flushFrequency,flushRefreshDelay:e.flushRefreshDelay},this.profile.setQAFlag(e.qa),e.webPushPublicKey&&(this.webPushAPIKey=e.webPushPublicKey),this.campaignManager.init(this.flushConfig)),[2]}}))}))},e.prototype.registerPush=function(e,t){this.swrvePushManager.registerPush(e,t)},e.prototype.unregisterPush=function(e,t){this.swrvePushManager.unregisterPush(e,t)},e.prototype.sendQueuedEvents=function(){this.eventQueueManager.sendEvents()},e.prototype.getQueuedEvents=function(){return this.localStorageClient.fetchEventsFromQueue(this.getUserID)},e.prototype.namedEvent=function(e){c.default.isValidEventName(e.name)&&this.eventInternal(l.eventTypes.namedEvent,e)},e.prototype.sessionStart=function(){this.sessionStartInternal()},e.prototype.userUpdate=function(e){null!=e?this.userUpdateInternal(e):d.default.errorMsg("There must be at least one key/value pair, this will not be queued")},e.prototype.userUpdateWithDate=function(e){e.name&&e.date?this.userUpdateWithDateInternal(l.eventTypes.userUpdateEvent,e):d.default.errorMsg("Both name and date are mandatory, this will not be added to the queue")},e.prototype.purchaseEvent=function(e){e.cost&&e.item&&e.currency&&e.quantity&&this.purchaseInternal(e.item,e.currency,e.cost,e.quantity)},e.prototype.genericCampaignEvent=function(e){e.actionType&&e.campaignType&&e.campaignId&&e.id&&this.genericCampaignEventInternal({actionType:e.actionType,campaignId:e.campaignId,campaignType:e.campaignType,id:e.id})},e.prototype.pushNotificationEngagedEvent=function(e,t){var n="Swrve.Messages.Push-"+e+".engaged",r=this.eventFactory.constructEvent(this.profile.updateSeqnum(),_.nowInUtcTime(),"event",n),o=[r];if(this.profile.IsQA){var i=this.eventFactory.constructQAEvent(r);this.eventQueueManager.sendQAEvents([i])}this.queueEvents(o)},e.prototype.currencyGiven=function(e){e.currency&&e.amount&&this.currencyGivenInternal({currency:e.currency,amount:e.amount})},e.prototype.iapEvent=function(e){e.cost&&e.local_currency&&e.quantity&&e.product_id?this.iapInternal(e.rewards,e.local_currency,e.cost,e.quantity,e.product_id):d.default.infoMsg("Missing expected parameter")},Object.defineProperty(e.prototype,"onSwrveLoaded",{set:function(e){"function"==typeof e?this.onSwrveLoadedCallback=e:d.default.errorMsg("invalid function")},enumerable:!0,configurable:!0}),e.prototype.initializeIdentity=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return d.default.infoMsg("Setting up profile"),this.profile=new m.default(this.config.ExternalUserId),this.profile.IsIdentityResolved?[3,2]:[4,this.profile.callIdentifyOnExternalUserId(this.config.ExternalUserId,this)];case 1:e.sent(),this.profile.IsIdentityResolved&&d.default.infoMsg("Identify Resolved: "+this.profile.UserId+" for extUserId: "+this.profile.ExternalUserId),e.label=2;case 2:return[2]}}))}))},e.prototype.initializePersistentData=function(){this.hasPersistentInstallDate()||(this.sessionStartedAt=_.nowInUtcTime(),this.setPersistentInstallDate()),this.hasPersistentDeviceId()||this.setPersistentDeviceId()},e.prototype.queueEvents=function(e){var t=this;e.forEach((function(e){t.localStorageClient.storeEventOnQueue(t.getUserID,e)}))},e.prototype.eventInternal=function(e,t){var n=this.eventFactory.constructEvent(this.profile.updateSeqnum(),_.nowInUtcTime(),e,t.name,t.payload),r=[n];if(this.profile.IsQA){var o=this.eventFactory.constructQAEvent(n);this.eventQueueManager.sendQAEvents([o])}this.queueEvents(r)},e.prototype.genericCampaignEventInternal=function(e){var t=this.eventFactory.constructGenericCampaignEvent(this.profile.updateSeqnum(),(new Date).getTime(),e.campaignType,e.campaignId,e.id,e.actionType);this.queueEvents([t])},e.prototype.currencyGivenInternal=function(e){var t=this.eventFactory.constructCurrencyGiven(this.profile.updateSeqnum(),_.nowInUtcTime(),e.currency,e.amount),n=[t];if(this.profile.IsQA){var r=this.eventFactory.constructQACurrencyGiven(t);this.eventQueueManager.sendQAEvents([r])}this.queueEvents(n)},e.prototype.sessionStartInternal=function(){var e=this.eventFactory.constructSessionStart(this.profile.updateSeqnum(),_.nowInUtcTime()),t=[e];if(this.profile.IsQA){var n=this.eventFactory.constructQASessionStart(e);this.eventQueueManager.sendQAEvents([n])}this.queueEvents(t)},e.prototype.userUpdateInternal=function(e){var t=this.eventFactory.constructUserUpdate(this.profile.updateSeqnum(),_.nowInUtcTime(),e),n=[t];if(this.profile.IsQA){var r=this.eventFactory.constructQAUserUpdate(t);this.eventQueueManager.sendQAEvents([r])}this.queueEvents(n)},e.prototype.userUpdateWithDateInternal=function(e,t){var n=this.profile.updateSeqnum(),r=this.eventFactory.constructUserUpdateWithDate(n,_.nowInUtcTime(),t.name,t.date),o=[];if(o.push(r),this.profile.IsQA){var i=this.eventFactory.constructQAUserUpdateWithDate(r);this.eventQueueManager.sendQAEvents([i])}this.queueEvents(o)},e.prototype.purchaseInternal=function(e,t,n,r){var o=this.profile.updateSeqnum(),i=this.eventFactory.constructPurchaseEvent(o,_.nowInUtcTime(),e,t,n,r),s=[];if(s.push(i),this.profile.IsQA){var a=this.eventFactory.constructQAPurchaseEvent(i);this.eventQueueManager.sendQAEvents([a])}this.queueEvents(s)},e.prototype.iapInternal=function(e,t,n,r,o){var i=this.profile.updateSeqnum(),s=this.eventFactory.constructIAPEvent(i,_.nowInUtcTime(),e,t,n,r,o),a=[];if(a.push(s),this.profile.IsQA){var u=this.eventFactory.constructQAIAPEvent(s);this.eventQueueManager.sendQAEvents([u])}this.queueEvents(a)},e.prototype.sendClientInfo=function(){var e=this.profile.updateSeqnum(),t=y.default.getClientInfo(),n=this.eventFactory.constructDeviceUpdate(e,_.nowInUtcTime(),t),r=[n];if(this.profile.IsQA){var o=this.eventFactory.constructQADeviceUpdate(n);this.eventQueueManager.sendQAEvents([o])}this.queueEvents(r)},e.prototype.generateSessionToken=function(e){var t=new s.Md5;t.appendStr(this.profile.UserId).appendStr(e).appendStr(this.config.ApiKey);var n=t.end();return this.config.AppID+"="+this.profile.UserId+"="+e+"="+n},e.prototype.hasSessionRestored=function(){if(null!=this.profile.LastSession){d.default.infoMsg("LastSession"),d.default.infoMsg(this.profile.LastSession);var e=Number(this.profile.LastSession);d.default.infoMsg("lastSession: "+e);var t=Number(_.nowInUtcTime());d.default.infoMsg("now: "+t);var n=1e3*this.config.NewSessionInterval,r=t-e;return d.default.infoMsg("Diff now - lastSession: "+r),!(e&&r>n&&(d.default.infoMsg("session has expired. returning false"),1))}return!1},e.prototype.getPersistentInstallDate=function(){return this.localStorageClient.fetchInstallDate()},e.prototype.hasPersistentInstallDate=function(){return h.isPresent(this.getPersistentInstallDate())},e.prototype.setPersistentInstallDate=function(){var e=f.default.dateToUTCDate(new Date(Date.now()));d.default.infoMsg("Setting Install Date:"),d.default.infoMsg(e),this.localStorageClient.storeInstallDate(f.default.dateToSwrveYYYYMMDDFormat(e))},e.prototype.getPersistentDeviceId=function(){return this.localStorageClient.fetchDeviceID()},e.prototype.hasPersistentDeviceId=function(){return h.isPresent(this.getPersistentDeviceId())},e.prototype.setPersistentDeviceId=function(){var e=I.generateUuid();d.default.infoMsg("Setting device id: "+e),this.localStorageClient.storeDeviceID(e.toString())},e.pageStateHandler=function(){null!==this.instance&&this.instance.profile.saveBeforeSessionEnd()},e}();t.default=E},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=n(22),s=r(n(23)),a=function(){function e(){this.storageManager=new s.default}return e.prototype.storeInstallDate=function(e){return this.storageManager.writeLocal(i.GlobalNamespaceKeys.InstallDate,e.toString())},e.prototype.fetchInstallDate=function(){var e=this.storageManager.readLocal(i.GlobalNamespaceKeys.InstallDate);return e?e.toString():void 0},e.prototype.storeDeviceID=function(e){return this.storageManager.writeLocal(i.GlobalNamespaceKeys.DeviceID,e)},e.prototype.fetchDeviceID=function(){return this.storageManager.readLocal(i.GlobalNamespaceKeys.DeviceID)},e.prototype.storeUserID=function(e,t){return this.storageManager.writeLocal(this.userIDKey(e),t)},e.prototype.fetchUserID=function(e){var t=this.storageManager.readLocal(this.userIDKey(e));return null!=t&&(t=t.toString()),t},e.prototype.storeLastETag=function(e,t){return this.storageManager.writeLocal(this.lastETagKey(e),t)},e.prototype.fetchLastETag=function(e){return this.storageManager.readLocal(this.lastETagKey(e))},e.prototype.storeFirstSession=function(e,t){return this.storageManager.writeLocal(this.firstSessionKey(e),t)},e.prototype.fetchFirstSession=function(e){var t=this.storageManager.readLocal(this.firstSessionKey(e));return t?+t:void 0},e.prototype.storeLastSession=function(e,t){return this.storageManager.writeLocal(this.lastSessionKey(e),t)},e.prototype.fetchLastSession=function(e){var t=this.storageManager.readLocal(this.lastSessionKey(e));return t?+t:void 0},e.prototype.storeSeqnum=function(e,t){return this.storageManager.writeLocal(this.seqnumKey(e),t)},e.prototype.fetchSeqnum=function(e){return+this.storageManager.readLocal(this.seqnumKey(e))},e.prototype.storeLastFlushFrequency=function(e,t){return this.storageManager.writeLocal(this.lastFlushFrequency(e),t)},e.prototype.fetchLastFlushFrequency=function(e){return this.storageManager.readLocal(this.lastFlushFrequency(e))},e.prototype.storeLastFlushRefreshDelay=function(e,t){return this.storageManager.writeLocal(this.lastFlushRefreshDelay(e),t)},e.prototype.fetchLastFlushRefreshDelay=function(e){return this.storageManager.readLocal(this.lastFlushRefreshDelay(e))},e.prototype.storeLastWebPushPublicKey=function(e,t){return this.storageManager.writeLocal(this.lastWebPushPublicKey(e),t)},e.prototype.fetchLastWebPushPublicKey=function(e){return this.storageManager.readLocal(this.lastWebPushPublicKey(e))},e.prototype.storeQAStatus=function(e,t){return this.storageManager.writeLocal(this.qaStatus(e),t)},e.prototype.fetchQAStatus=function(e){return this.storageManager.readLocal(this.qaStatus(e))},e.prototype.storeEventOnQueue=function(e,t){return this.storageManager.writeLocal(this.eventsQueueKey(e),t)},e.prototype.fetchEventKeys=function(e){var t=this;return this.storageManager.localKeys().filter((function(n){return n.startsWith(t.eventsQueueKeyPrefix(e))}))},e.prototype.fetchEventsFromQueue=function(e){var t=this,n=this.fetchEventKeys(e),r=[];return n.forEach((function(e){r.push(t.fetchEventFromQueue(e))})),r},e.prototype.fetchEventFromQueue=function(e){return this.storageManager.readLocal(e)},e.prototype.deleteEventOnQueue=function(e){this.storageManager.deleteLocal(e)},e.prototype.userIDKey=function(e){return"swrve:"+e+":"+i.ExternalUserNamespaceKeys.UserID},e.prototype.firstSessionKey=function(e){return"swrve:"+e+":"+i.UserNamespaceKeys.FirstSession},e.prototype.lastSessionKey=function(e){return"swrve:"+e+":"+i.UserNamespaceKeys.LastSession},e.prototype.seqnumKey=function(e){return"swrve:"+e+":"+i.UserNamespaceKeys.Seqnum},e.prototype.lastETagKey=function(e){return"swrve:"+e+":"+i.UserNamespaceKeys.LastETag},e.prototype.lastFlushFrequency=function(e){return"swrve:"+e+":"+i.UserNamespaceKeys.LastFlushFrequency},e.prototype.lastFlushRefreshDelay=function(e){return"swrve:"+e+":"+i.UserNamespaceKeys.LastFlushRefreshDelay},e.prototype.lastWebPushPublicKey=function(e){return"swrve:"+e+":"+i.UserNamespaceKeys.LastWebPushPublicKey},e.prototype.qaStatus=function(e){return"swrve:"+e+":"+i.UserNamespaceKeys.QAStatus},e.prototype.eventsQueueKey=function(e){return this.eventsQueueKeyPrefix(e)+":"+this.eventsQueueKeyStamp()},e.prototype.eventsQueueKeyPrefix=function(e){return"swrve:"+e+":"+i.UserNamespaceKeys.Events},e.prototype.eventsQueueKeyStamp=function(){return o.nowInUtcTime()+"-"+window.performance.now()+"-"+Math.random()},e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return Object.defineProperty(e,"Mode",{get:function(){return this.mode},set:function(e){this.mode=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"DevMode",{get:function(){return"dev"===this.mode},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TestMode",{get:function(){return"test"===this.mode},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ProdMode",{get:function(){return"prod"===this.mode},enumerable:!0,configurable:!0}),e.mode="prod",e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.dateToSwrveISOString=function(e){return e.toISOString().split(".")[0]+"Z"},e.dateToSwrveYYYYMMDDFormat=function(e){return e.toISOString().split("T")[0].replace(/-/g,"")},e.dateToUTCDate=function(e){return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()))},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(18);t.sdkVersion="Web "+r.version,t.appStore="web",t.SWRVE_APP_STORE="swrve.app_store",t.SWRVE_COUNTRY_CODE="swrve.country_code",t.SWRVE_DEVICE_ID="swrve.device_id",t.SWRVE_DEVICE_NAME="swrve.device_name",t.SWRVE_DEVICE_REGION="swrve.device_region",t.SWRVE_DEVICE_WIDTH="swrve.device_width",t.SWRVE_DEVICE_HEIGHT="swrve.device_height",t.SWRVE_DEVICE_DPI="swrve.device_dpi",t.SWRVE_INSTALL_DATE="swrve.install_date",t.SWRVE_LANGUAGE="swrve.language",t.SWRVE_OS="swrve.os",t.SWRVE_OS_VERSION="swrve.os_version",t.SWRVE_SDK_VERSION="swrve.sdk_version",t.SWRVE_TIMEZONE_NAME="swrve.timezone_name",t.SWRVE_USER_ID="swrve.user_id",t.SWRVE_UTC_OFFSET_SECONDS="swrve.utc_offset_seconds",t.SWRVE_DEVICE_TYPE="swrve.device_type",t.SWRVE_BROWSER_NAME="swrve.browser_name",t.SWRVE_BROWSER_VERSION="swrve.browser_version",t.SWRVE_NAV_LANGUAGE="language",t.browserList=["chrome","opera","safari","firefox","msIE","Unknown"],t.browsersRegex={appleWebkit:/applewebkit/,chrome:/chrome/,chromium:/chromium/,edge:/edge/,firefox:/firefox/,mozilla:/mozilla/,msIE:/msie/,opera:/opr/,safari:/safari/,seamonkey:/seamonkey/,trident:/trident/,webkit:/webkit/},t.osRegex=[{name:"Windows 10",regex:/(Windows 10.0|Windows NT 10.0)/},{name:"Windows 8.1",regex:/(Windows 8.1|Windows NT 6.3)/},{name:"Windows 8",regex:/(Windows 8|Windows NT 6.2)/},{name:"Windows 7",regex:/(Windows 7|Windows NT 6.1)/},{name:"Windows Vista",regex:/Windows NT 6.0/},{name:"Windows Server 2003",regex:/Windows NT 5.2/},{name:"Windows XP",regex:/(Windows NT 5.1|Windows XP)/},{name:"Windows 2000",regex:/(Windows NT 5.0|Windows 2000)/},{name:"Windows ME",regex:/(Win 9x 4.90|Windows ME)/},{name:"Windows 98",regex:/(Windows 98|Win98)/},{name:"Windows 95",regex:/(Windows 95|Win95|Windows_95)/},{name:"Windows NT 4.0",regex:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{name:"Windows CE",regex:/Windows CE/},{name:"Windows 3.11",regex:/Win16/},{name:"Android",regex:/Android/},{name:"Open BSD",regex:/OpenBSD/},{name:"Sun OS",regex:/SunOS/},{name:"Linux",regex:/(Linux|X11)/},{name:"iOS",regex:/(iPhone|iPad|iPod)/},{name:"Mac OS X",regex:/Mac OS X/},{name:"Mac OS",regex:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{name:"QNX",regex:/QNX/},{name:"UNIX",regex:/UNIX/},{name:"BeOS",regex:/BeOS/},{name:"OS/2",regex:/OS\/2/},{name:"Search Bot",regex:/(nuhk|Googlebot|Yammybot|python|ruby|curl|bingbot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],t.browserBlackList=["msIE"],t.osBlackList=["Search Bot"]},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(4)),i=r(n(0)),s=n(8),a=function(){function e(){}return e.getClientInfo=function(){var e,t=this.getOS(),n=this.getBrowserInfo();return(e={})[s.SWRVE_DEVICE_ID]=this.getDeviceId(),e[s.SWRVE_OS]="web",e[s.SWRVE_OS_VERSION]=t.version,e[s.SWRVE_SDK_VERSION]=this.getSDKVersion(),e[s.SWRVE_LANGUAGE]=this.getBrowserLanguage(),e[s.SWRVE_COUNTRY_CODE]=this.getCountryCode(),e[s.SWRVE_DEVICE_REGION]=this.getRegion(),e[s.SWRVE_TIMEZONE_NAME]=this.getTimezoneName(),e[s.SWRVE_UTC_OFFSET_SECONDS]=this.getUTCOffsetSeconds(new Date),e[s.SWRVE_APP_STORE]=s.appStore,e[s.SWRVE_INSTALL_DATE]=this.getInstallDate(),e[s.SWRVE_BROWSER_NAME]=n.name,e[s.SWRVE_BROWSER_VERSION]=n.version,e[s.SWRVE_DEVICE_TYPE]=this.getDeviceType(),e},e.getOS=function(){var e,t={},n=navigator.userAgent.match(/\((.*?)\)/);n&&n.length>=2&&(t.version=n[1]);for(var r=0,o=s.osRegex;r<o.length;r++)if((e=o[r]).regex.test(navigator.userAgent)){t.name=e.name;break}return t},e.getDeviceName=function(){return this.getOS().name+" "+this.getBrowserInfo().name+" "+this.getBrowserInfo().version},e.getScreenResolution=function(){return{height:window.screen.availHeight.toString()||"Unknown",width:window.screen.availWidth.toString()||"Unknown"}},e.getBrowserLanguage=function(){return navigator[s.SWRVE_NAV_LANGUAGE]||"Unknown"},e.getTimezoneName=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone||"Unknown"},e.getUTCOffsetSeconds=function(e){var t=-60*e.getTimezoneOffset();return-0===t?0:t},e.getCountryCode=function(){return"Unknown"},e.getRegion=function(){return"Unknown"},e.getInstallDate=function(){var e=o.default.getCurrentInstance();return e?e.InstallDate.toString():null},e.getDeviceId=function(){var e=o.default.getCurrentInstance();return e?e.DeviceId.toString():null},e.getDeviceType=function(){var e=navigator.userAgent.toLowerCase();return/android|webos|iphone|ipad|ipod|ios|blackberry|iemobile|opera mini|mobi/i.test(e)?"mobile":"desktop"},e.getBrowserInfo=function(){var t={name:"Unknown",version:"N/A"},n=navigator.userAgent.toLowerCase(),r=this.checkBrowser();for(var o in r)if(r[o])return t.name=o,t.version=e.extractBrowserVersion(o,n),t;return i.default.errorMsg("Cannot identify browser"),t},e.getSDKVersion=function(){return s.sdkVersion},e.extractBrowserVersion=function(e,t){var n,r=new RegExp("version/(([0-9])+(.([0-9])+)+)"),o=new RegExp("rv:(([0-9])+(.([0-9])+)+)");return"safari"===e?(n=t.match(r))?n[1]:"N/A":(n=t.match(new RegExp("("+("msIE"===e?"msIE|edge":e)+")( |/)(([0-9])+(.([0-9])+)+)")))?n[3]||"N/A":(n=t.match(o))?n[1]:"N/A"},e.checkBrowser=function(){var e=navigator.userAgent.toLowerCase();return{chrome:s.browsersRegex.webkit.test(e)&&s.browsersRegex.chrome.test(e)&&!s.browsersRegex.edge.test(e)&&!s.browsersRegex.chromium.test(e),firefox:s.browsersRegex.mozilla.test(e)&&s.browsersRegex.firefox.test(e)&&!s.browsersRegex.seamonkey.test(e),msIE:s.browsersRegex.msIE.test(e)||s.browsersRegex.trident.test(e)||s.browsersRegex.edge.test(e),opera:s.browsersRegex.mozilla.test(e)&&s.browsersRegex.appleWebkit.test(e)&&s.browsersRegex.chrome.test(e)&&s.browsersRegex.safari.test(e)&&s.browsersRegex.opera.test(e),safari:s.browsersRegex.safari.test(e)&&s.browsersRegex.appleWebkit.test(e)&&!s.browsersRegex.chrome.test(e)}},e}();t.default=a},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(2),s=r(n(0));!function(e){e.GET="GET",e.POST="POST"}(o||(o={}));var a=function(){function e(){}return e.get=function(e,t,n){return this.xhrRequest(o.GET,e,null,t,n)},e.post=function(e,t,n,r){return this.xhrRequest(o.POST,e,t,n,r)},e.xhrRequest=function(e,t,n,r,o){var a=this;return new Promise((function(u,c){var f=a.getXmlHttpRequest(e,t),l=null;f.onload=function(){return(l=a.getXmlHTTPResponse(e,f)).statusCode>=400?(s.default.warnMsg("Restclient received status code: "+l.statusCode),i.isNil(o)||o(l),c(l)):(i.isNil(r)||r(l),u(l))},f.onerror=function(){return s.default.warnMsg("RESTClient encountered an error"),i.isNil(o)||o(l),c(new Error(f.statusText))},n?f.send(JSON.stringify(n)):f.send()}))},e.getXmlHTTPResponse=function(e,t){return{etag:e===o.GET&&"{}"!==t.responseText?t.getResponseHeader("Etag"):null,jsonBody:t.responseText,statusCode:t.status}},e.getXmlHttpRequest=function(e,t){var n=new XMLHttpRequest;return n.open(e,t,!0),n.setRequestHeader("Content-type","application/json"),n},e}();t.default=a},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(14)),i=r(n(4)),s=r(n(6)),a=null,u=function(){function e(e){var t=o.default.validateInitParams(e);if(t)throw o.default.outputErrors(t),new TypeError("Parameters are not correct");s.default.Mode=e.mode||"prod",a=i.default.createInstance(e)}return e.createInstance=function(t){return e.instance||(e.instance=new e(t),e.instance.init()),e.instance},e.prototype.init=function(){return e.checkInstance().init()},e.checkInstance=function(){if(null==a)throw Error("Please call SwrveSDK.createInstance() first");return a},e.namedEvent=function(t){e.checkInstance().namedEvent(t)},e.userUpdate=function(t){e.checkInstance().userUpdate(t)},e.userUpdateWithDate=function(t){e.checkInstance().userUpdateWithDate(t)},e.purchaseEvent=function(t){e.checkInstance().purchaseEvent(t)},e.iapEvent=function(t){e.checkInstance().iapEvent(t)},e.currencyGiven=function(t){e.checkInstance().currencyGiven(t)},e.getQueuedEvents=function(){return e.checkInstance().getQueuedEvents()},e.getConfig=function(){return e.checkInstance().Config},e.getPushManager=function(){return e.checkInstance().SwrvePushManager},e.registerPush=function(t,n){return e.checkInstance().registerPush(t,n)},e.unregisterPush=function(t,n){return e.checkInstance().unregisterPush(t,n)},e.getUserId=function(){return e.checkInstance().getUserID},e.getExternalUserId=function(){return e.checkInstance().Config.ExternalUserId},e.shutdown=function(){null!=a&&i.default.shutdown(),a=null,e.instance=null},Object.defineProperty(e,"onSwrveLoaded",{set:function(t){e.checkInstance().onSwrveLoaded=t},enumerable:!0,configurable:!0}),e.instance=null,e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.eventTypes={currencyGiven:"currency_given",deviceUpdateEvent:"device_update",genericCampaignEvent:"generic_campaign_event",iapEvent:"iap",namedEvent:"event",purchaseEvent:"purchase",qaLogEvent:"qa_log_event",sessionStartEvent:"session_start",userUpdateEvent:"user"},t.firstSessionEventName="Swrve.first_session",t.sessionStartEventName="Swrve.session_start"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uuidRegex=/^\s*([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})\s*$/i,t.parseUuid=function(e){var n=t.uuidRegex.exec(e);if(null==n)throw new Error("Invalid UUID");var o=(n[1]+n[2]+n[3]+n[4]+n[5]).split(/(..)/g).filter((function(e){return 2===e.length})).map((function(e){return parseInt(e,16)}));return new r(o)},t.generateUuid=function(){var e=crypto.getRandomValues(new Uint8Array(16));return e[6]=15&e[6]|64,e[8]=63&e[8]|128,new r(Array.from(e))};var r=function(){function e(e){if(16!==e.length)throw new Error("Invalid UUID: Incorrect byte count");this.bytes=e.map((function(e){return 255&e}))}return e.prototype.toString=function(){return this.bytes.map((function(e){return e.toString(16)})).map((function(e){return("0"+e).substr(-2)})).join("").replace(/^(.{8})(.{4})(.{4})(.{4})(.{12})$/,"$1-$2-$3-$4-$5")},e}();t.Uuid=r},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(n(6)),s=r(n(0)),a=/[(https):\/\/(www\.)?a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/gi,u=function(){function e(){}return e.validateExternalUserId=function(e){var t=[];return null!=e&&"string"!=typeof e&&t.push("externalUserId should be a string"),t},e.validateAppId=function(e){var t=[];return e||t.push("appId doesn't exist"),e&&"number"!=typeof e&&t.push("appId should be a number"),t},e.validateApiKey=function(e){var t=[];return e||t.push("apiKey doesn't exist"),e&&"string"!=typeof e&&t.push("apiKey should be a string"),e&&"string"==typeof e&&!e.startsWith("web_sdk-")&&t.push("apiKey should be a valid web_sdk api key"),t},e.validateContentUrl=function(e){var t=[];e&&"string"!=typeof e&&t.push("contentURL should be a string");var n=new RegExp(a);return e&&!n.test(e)&&t.push("contentURL isn't valid URL"),t},e.validateApiUrl=function(e){var t=[];e&&"string"!=typeof e&&t.push("apiURL should be a string");var n=new RegExp(a);return e&&!n.test(e)&&t.push("apiURL isn't a valid URL"),t},e.validateVersion=function(e){var t=[];return e&&"string"!=typeof e&&t.push("version should be a string"),e&&!/(([0-9])+(\.([0-9])+)+)/.test(e)&&t.push("version isn't valid"),t},e.validateSessionTimeout=function(e){var t=[];return e&&"number"!=typeof e&&t.push("sessionTimeout should be a number"),e&&e<0&&t.push("sessionTimeout should be positive integer or 0"),t},e.validateInitParams=function(e){var t={};if(e&&"[object Object]"===Object.prototype.toString.call(e)?t.devErrors=this.validateExternalUserId(e.externalUserId).concat(this.validateAppId(e.appId),this.validateApiKey(e.apiKey),this.validateContentUrl(e.contentURL),this.validateApiUrl(e.apiURL),this.validateVersion(e.appVersion),this.validateSessionTimeout(e.httpTimeoutSeconds)):t.devErrors=["Init params should follow the scheme:\n        {\n          appId: number - *required\n          apiKey: string - *required\n          apiURL: string\n          contentURL: string\n          sessionTimeout: number\n          externalUserId: string - *required\n          version: string\n          devMode: boolean\n        }"],t.devErrors.length)return t.mainError="Initial configuration parameters are incorrect",t},e.outputErrors=function(e){i.default.ProdMode?s.default.errorMsg(o.messageConfig.title+" "+o.messageConfig.types.error+": "+e.mainError):(s.default.errorMsg(o.messageConfig.title+" "+o.messageConfig.types.error+": "+e.mainError),e.devErrors.forEach((function(e){s.default.errorMsg(" "+e)})))},e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}return e.hashStr=function(e,t){return void 0===t&&(t=!1),this.onePassHasher.start().appendStr(e).end(t)},e.hashAsciiStr=function(e,t){return void 0===t&&(t=!1),this.onePassHasher.start().appendAsciiStr(e).end(t)},e._hex=function(t){var n,r,o,i,s=e.hexChars,a=e.hexOut;for(i=0;i<4;i+=1)for(r=8*i,n=t[i],o=0;o<8;o+=2)a[r+1+o]=s.charAt(15&n),n>>>=4,a[r+0+o]=s.charAt(15&n),n>>>=4;return a.join("")},e._md5cycle=function(e,t){var n=e[0],r=e[1],o=e[2],i=e[3];r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&o)+t[1]-389564586|0)<<12|i>>>20)+n|0)&n|~i&r)+t[2]+606105819|0)<<17|o>>>15)+i|0)&i|~o&n)+t[3]-1044525330|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&o)+t[5]+1200080426|0)<<12|i>>>20)+n|0)&n|~i&r)+t[6]-1473231341|0)<<17|o>>>15)+i|0)&i|~o&n)+t[7]-45705983|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&o)+t[9]-1958414417|0)<<12|i>>>20)+n|0)&n|~i&r)+t[10]-42063|0)<<17|o>>>15)+i|0)&i|~o&n)+t[11]-1990404162|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&o)+t[13]-40341101|0)<<12|i>>>20)+n|0)&n|~i&r)+t[14]-1502002290|0)<<17|o>>>15)+i|0)&i|~o&n)+t[15]+1236535329|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[1]-165796510|0)<<5|n>>>27)+r|0)&o|r&~o)+t[6]-1069501632|0)<<9|i>>>23)+n|0)&r|n&~r)+t[11]+643717713|0)<<14|o>>>18)+i|0)&n|i&~n)+t[0]-373897302|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[5]-701558691|0)<<5|n>>>27)+r|0)&o|r&~o)+t[10]+38016083|0)<<9|i>>>23)+n|0)&r|n&~r)+t[15]-660478335|0)<<14|o>>>18)+i|0)&n|i&~n)+t[4]-405537848|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[9]+568446438|0)<<5|n>>>27)+r|0)&o|r&~o)+t[14]-1019803690|0)<<9|i>>>23)+n|0)&r|n&~r)+t[3]-187363961|0)<<14|o>>>18)+i|0)&n|i&~n)+t[8]+1163531501|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[13]-1444681467|0)<<5|n>>>27)+r|0)&o|r&~o)+t[2]-51403784|0)<<9|i>>>23)+n|0)&r|n&~r)+t[7]+1735328473|0)<<14|o>>>18)+i|0)&n|i&~n)+t[12]-1926607734|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[5]-378558|0)<<4|n>>>28)+r|0)^r^o)+t[8]-2022574463|0)<<11|i>>>21)+n|0)^n^r)+t[11]+1839030562|0)<<16|o>>>16)+i|0)^i^n)+t[14]-35309556|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[1]-1530992060|0)<<4|n>>>28)+r|0)^r^o)+t[4]+1272893353|0)<<11|i>>>21)+n|0)^n^r)+t[7]-155497632|0)<<16|o>>>16)+i|0)^i^n)+t[10]-1094730640|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[13]+681279174|0)<<4|n>>>28)+r|0)^r^o)+t[0]-358537222|0)<<11|i>>>21)+n|0)^n^r)+t[3]-722521979|0)<<16|o>>>16)+i|0)^i^n)+t[6]+76029189|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[9]-640364487|0)<<4|n>>>28)+r|0)^r^o)+t[12]-421815835|0)<<11|i>>>21)+n|0)^n^r)+t[15]+530742520|0)<<16|o>>>16)+i|0)^i^n)+t[2]-995338651|0)<<23|r>>>9)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[0]-198630844|0)<<6|n>>>26)+r|0)|~o))+t[7]+1126891415|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[14]-1416354905|0)<<15|o>>>17)+i|0)|~n))+t[5]-57434055|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[12]+1700485571|0)<<6|n>>>26)+r|0)|~o))+t[3]-1894986606|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[10]-1051523|0)<<15|o>>>17)+i|0)|~n))+t[1]-2054922799|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[8]+1873313359|0)<<6|n>>>26)+r|0)|~o))+t[15]-30611744|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[6]-1560198380|0)<<15|o>>>17)+i|0)|~n))+t[13]+1309151649|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[4]-145523070|0)<<6|n>>>26)+r|0)|~o))+t[11]-1120210379|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[2]+718787259|0)<<15|o>>>17)+i|0)|~n))+t[9]-343485551|0)<<21|r>>>11)+o|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=o+e[2]|0,e[3]=i+e[3]|0},e.prototype.start=function(){return this._dataLength=0,this._bufferLength=0,this._state.set(e.stateIdentity),this},e.prototype.appendStr=function(t){var n,r,o=this._buffer8,i=this._buffer32,s=this._bufferLength;for(r=0;r<t.length;r+=1){if((n=t.charCodeAt(r))<128)o[s++]=n;else if(n<2048)o[s++]=192+(n>>>6),o[s++]=63&n|128;else if(n<55296||n>56319)o[s++]=224+(n>>>12),o[s++]=n>>>6&63|128,o[s++]=63&n|128;else{if((n=1024*(n-55296)+(t.charCodeAt(++r)-56320)+65536)>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");o[s++]=240+(n>>>18),o[s++]=n>>>12&63|128,o[s++]=n>>>6&63|128,o[s++]=63&n|128}s>=64&&(this._dataLength+=64,e._md5cycle(this._state,i),s-=64,i[0]=i[16])}return this._bufferLength=s,this},e.prototype.appendAsciiStr=function(t){for(var n,r=this._buffer8,o=this._buffer32,i=this._bufferLength,s=0;;){for(n=Math.min(t.length-s,64-i);n--;)r[i++]=t.charCodeAt(s++);if(i<64)break;this._dataLength+=64,e._md5cycle(this._state,o),i=0}return this._bufferLength=i,this},e.prototype.appendByteArray=function(t){for(var n,r=this._buffer8,o=this._buffer32,i=this._bufferLength,s=0;;){for(n=Math.min(t.length-s,64-i);n--;)r[i++]=t[s++];if(i<64)break;this._dataLength+=64,e._md5cycle(this._state,o),i=0}return this._bufferLength=i,this},e.prototype.getState=function(){var e=this._state;return{buffer:String.fromCharCode.apply(null,this._buffer8),buflen:this._bufferLength,length:this._dataLength,state:[e[0],e[1],e[2],e[3]]}},e.prototype.setState=function(e){var t,n=e.buffer,r=e.state,o=this._state;for(this._dataLength=e.length,this._bufferLength=e.buflen,o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],t=0;t<n.length;t+=1)this._buffer8[t]=n.charCodeAt(t)},e.prototype.end=function(t){void 0===t&&(t=!1);var n,r=this._bufferLength,o=this._buffer8,i=this._buffer32,s=1+(r>>2);if(this._dataLength+=r,o[r]=128,o[r+1]=o[r+2]=o[r+3]=0,i.set(e.buffer32Identity.subarray(s),s),r>55&&(e._md5cycle(this._state,i),i.set(e.buffer32Identity)),(n=8*this._dataLength)<=4294967295)i[14]=n;else{var a=n.toString(16).match(/(.*?)(.{0,8})$/);if(null===a)return;var u=parseInt(a[2],16),c=parseInt(a[1],16)||0;i[14]=u,i[15]=c}return e._md5cycle(this._state,i),t?this._state:e._hex(this._state)},e.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),e.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),e.hexChars="0123456789abcdef",e.hexOut=[],e.onePassHasher=new e,e}();t.Md5=r,"5d41402abc4b2a76b9719d911017c592"!==r.hashStr("hello")&&console.error("Md5 self test failed.")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=function(){function e(e){this.appID=null,this.apiKey=null,this.apiURL=null,this.contentURL=null,this.identifyURL=null,this.language=null,this.newSessionInterval=null,this.httpTimeoutSeconds=null,this.serviceWorker=null,this.pushEnabled=!1,this.autoPushSubscribe=!1,this.userVisibleOnly=!0,this.externalUserId=e.externalUserId,this.appID=e.appId,this.apiKey=e.apiKey,this.stack=e.stack||"us",this.language=e.language||"English",this.newSessionInterval=e.newSessionInterval||1800,this.resolveApiUrl(e),this.resolveContentUrl(e),this.resolveIdentifyUrl(e),this.appVersion=e.appVersion||"1.0",this.httpTimeoutSeconds=e.httpTimeoutSeconds||10,this.autoPushSubscribe=e.autoPushSubscribe||!1,this.serviceWorker=e.serviceWorker||r.swrveServiceWorkerName}return Object.defineProperty(e.prototype,"ExternalUserId",{get:function(){return this.externalUserId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AppVersion",{get:function(){return this.appVersion},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AppID",{get:function(){return this.appID},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ApiKey",{get:function(){return this.apiKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ApiURL",{get:function(){return this.apiURL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ContentURL",{get:function(){return this.contentURL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IdentifyURL",{get:function(){return this.identifyURL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ServiceWorker",{get:function(){return this.serviceWorker},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AutoPushSubscribe",{get:function(){return this.autoPushSubscribe},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"HttpTimeoutSeconds",{get:function(){return this.httpTimeoutSeconds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Language",{get:function(){return this.language},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"NewSessionInterval",{get:function(){return this.newSessionInterval},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"UserVisibleOnly",{get:function(){return this.userVisibleOnly},enumerable:!0,configurable:!0}),e.prototype.resolveApiUrl=function(e){var t="eu"===e.stack?"eu-api":"api";this.apiURL=e.apiURL||"https://"+e.appId+"."+t+".swrve.com"},e.prototype.resolveContentUrl=function(e){var t="eu"===e.stack?"eu-content":"content";this.contentURL=e.contentURL||"https://"+e.appId+"."+t+".swrve.com"},e.prototype.resolveIdentifyUrl=function(e){var t="eu"===this.stack?"eu-identity":"identity";this.identifyURL=e.identifyURL||"https://"+e.appId+"."+t+".swrve.com/identify"},e}();t.default=o},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(7)),i=n(12),s=n(8),a=function(){function e(){}return e.prototype.constructEvent=function(e,t,n,r,o){var i={seqnum:e,time:t,type:n};return null!=r&&(i.name=r),i.payload=null!=o?o:{},i},e.prototype.constructQAEvent=function(e){var t={client_time:e.time,parameters:{name:e.name},seqnum:e.seqnum,type:e.type};return e.name&&e.payload&&(t.parameters={name:e.name,payload:e.payload}),e.name&&!e.payload&&(t.parameters={name:e.name}),e.name||e.payload||(t.parameters={}),this.constructQAWrappedEvent(t)},e.prototype.constructSessionStart=function(e,t,n,r){return this.constructEvent(e,t,i.eventTypes.sessionStartEvent,n,r)},e.prototype.constructQASessionStart=function(e){return this.constructQAEvent(e)},e.prototype.constructUserUpdate=function(e,t,n){return{attributes:n,seqnum:e,time:t,type:i.eventTypes.userUpdateEvent}},e.prototype.constructQAUserUpdate=function(e){var t={client_time:e.time,parameters:{attributes:e.attributes},seqnum:e.seqnum,type:e.type};return this.constructQAWrappedEvent(t)},e.prototype.constructUserUpdateWithDate=function(e,t,n,r){var i=o.default.dateToUTCDate(r),s={name:n,date:o.default.dateToSwrveISOString(i)};return this.constructUserUpdate(e,t,s)},e.prototype.constructQAUserUpdateWithDate=function(e){return this.constructQAUserUpdate(e)},e.prototype.constructGenericCampaignEvent=function(e,t,n,r,o,s){return{actionType:s,campaignId:r,campaignType:n,id:o,seqnum:e,time:t,type:i.eventTypes.genericCampaignEvent}},e.prototype.constructDeviceUpdate=function(e,t,n){return{attributes:n,seqnum:e,time:t,type:i.eventTypes.deviceUpdateEvent}},e.prototype.constructQADeviceUpdate=function(e){var t={client_time:e.time,parameters:{attributes:e.attributes},seqnum:e.seqnum,type:e.type};return this.constructQAWrappedEvent(t)},e.prototype.constructPurchaseEvent=function(e,t,n,r,o,s){return{cost:o,currency:r,item:n,quantity:s,seqnum:e,time:t,type:i.eventTypes.purchaseEvent}},e.prototype.constructQAPurchaseEvent=function(e){var t={client_time:e.time,parameters:{cost:e.cost,currency:e.currency,item:e.item,quantity:e.quantity},seqnum:e.seqnum,type:e.type};return this.constructQAWrappedEvent(t)},e.prototype.constructIAPEvent=function(e,t,n,r,o,a,u){return{app_store:s.appStore,cost:o,local_currency:r,product_id:u,quantity:a,rewards:n,seqnum:e,time:t,type:i.eventTypes.iapEvent}},e.prototype.constructQAIAPEvent=function(e){var t={client_time:e.time,parameters:{app_store:s.appStore,cost:e.cost,local_currency:e.local_currency,product_id:e.product_id,quantity:e.quantity,rewards:e.rewards},seqnum:e.seqnum,type:e.type};return this.constructQAWrappedEvent(t)},e.prototype.constructCurrencyGiven=function(e,t,n,r){return{given_amount:r,given_currency:n,seqnum:e,time:t,type:i.eventTypes.currencyGiven}},e.prototype.constructQACurrencyGiven=function(e){var t={client_time:e.time,parameters:{given_amount:e.given_amount,given_currency:e.given_currency},seqnum:e.seqnum,type:e.type};return this.constructQAWrappedEvent(t)},e.prototype.constructQAWrappedEvent=function(e){return{log_details:e,log_source:"sdk",log_type:"event",seqnum:e.seqnum,time:e.client_time,type:"qa_log_event"}},e}();t.default=a},function(e){e.exports={name:"@swrve/web-sdk",version:"1.4.3",author:"Swrve Inc.",license:"Apache-2.0",keywords:["swrve","sdk","web","browser","js","chrome","firefox","safari","engagement","marketing","platform"],homepage:"https://github.com/Swrve/swrve-web-sdk#readme",bugs:{url:"https://github.com/Swrve/swrve-web-sdk/issues"},repository:{type:"git",url:"git@github.com:Swrve/swrve-web-sdk.git"},files:["dist/**/*"],browser:"dist/SwrveSDK.js",scripts:{bundle:"yarn run bundle:prod","bundle:dev":"webpack --config webpack.dev.js --watch","bundle:prod":"webpack --config webpack.prod.js","bundle:release":"yarn run bundle:prod",stats:"webpack --config webpack.prod.js --profile --json > stats.json && webpack-bundle-analyzer stats.json --mode static --no-open",clean:"yarn cache clean && rm -rf ./dist",lint:"tslint --project tsconfig.json",prepublish:"yarn bundle:release"},devDependencies:{"clean-webpack-plugin":"1.0.0","ts-loader":"5.3.3","ts-md5":"1.2.4",tslint:"5.12.1","tslint-config-airbnb":"5.11.1","tslint-loader":"3.5.4","tslint-sonarts":"1.8.0",typedoc:"0.14.1","typedoc-webpack-plugin":"1.1.4",typescript:"3.2.2",webpack:"4.28.4","webpack-bundle-analyzer":"3.0.3","webpack-cli":"3.2.1","webpack-merge":"4.2.1"}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(0)),i=function(){function e(){}return e.isValidEventName=function(e){for(var t=0,n=["Swrve.","swrve."];t<n.length;t++){var r=n[t];if(null==e||e.startsWith(r))return o.default.errorMsg("Event names cannot begin with: "+r+" :: This event will not be sent. Eventname: "+e),!1}return!0},e}();t.default=i},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,a)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(21),a=n(1),u=i(n(9)),c=i(n(10)),f=i(n(5)),l=i(n(4)),p=n(3),h=n(2),d=i(n(0)),v=function(){function e(){}return e.prototype.init=function(e){this.flushConfig=e,this.processInBackground()},e.prototype.getInfoForSession=function(){return r(this,void 0,void 0,(function(){var e,t,n,r,i,s;return o(this,(function(o){switch(o.label){case 0:e=l.default.getCurrentInstance(),t=new f.default,n=h.isPresent(t.fetchLastFlushRefreshDelay(e.Profile.UserId)),e.Profile.Etag&&n&&l.default.getCurrentInstance().Profile.setEtag(null),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.getResourcesAndCampaigns()];case 2:return r=o.sent(),d.default.infoMsg(r.jsonBody),void 0!==r.jsonBody&&"{}"!==r.jsonBody&&200===r.statusCode&&(i=JSON.parse(r.jsonBody),t.storeLastFlushFrequency(e.Profile.UserId,i.flush_frequency),t.storeLastFlushRefreshDelay(e.Profile.UserId,i.flush_refresh_delay),t.storeQAStatus(e.Profile.UserId,"qa"in i),t.storeLastWebPushPublicKey(e.Profile.UserId,i.web_push_public_key),r.etag&&l.default.getCurrentInstance().Profile.setEtag(r.etag)),[2,{flushFrequency:t.fetchLastFlushFrequency(e.Profile.UserId)||a.defaultFlushFrequency,flushRefreshDelay:t.fetchLastFlushRefreshDelay(e.Profile.UserId)||a.defaultFlushRefreshDelay,qa:t.fetchQAStatus(e.Profile.UserId)||!1,webPushPublicKey:t.fetchLastWebPushPublicKey(e.Profile.UserId)||null}];case 3:return s=o.sent(),d.default.errorMsg(s),[2,{flushFrequency:a.defaultFlushFrequency,flushRefreshDelay:a.defaultFlushRefreshDelay,qa:!1,webPushPublicKey:null}];case 4:return[2]}}))}))},e.prototype.processInBackground=function(){if(this.isProcessing)return null;this.setAsStarted();try{this.getResourcesAndCampaigns()}catch(e){d.default.errorMsg("SwrveSDK - An error has occured processing events"),d.default.errorMsg(e)}this.setAsStopped(),this.timeoutProcess=window.setTimeout(this.processInBackground.bind(this),this.flushConfig.flushFrequency)},e.prototype.shutdown=function(){clearTimeout(this.timeoutProcess),this.timeoutProcess=void 0},e.prototype.setAsStarted=function(){this.isProcessing=!0,this.lastProcessingStart=p.nowInUtcTime()},e.prototype.setAsStopped=function(){this.isProcessing=!1,this.lastProcessingStop=p.nowInUtcTime()},e.prototype.resourceAndCampaignRequestUrl=function(e){var t={api_key:e.Config.ApiKey,app_store:s.resourcesCampaignSpecialParams.app_store,app_version:e.Config.AppVersion||a.swrveVersion.toString(),device_height:u.default.getScreenResolution().height,device_name:u.default.getDeviceName(),device_type:u.default.getDeviceType(),device_width:u.default.getScreenResolution().width,joined:e.Profile.FirstSession.toString(),language:u.default.getBrowserLanguage(),orientation:s.resourcesCampaignSpecialParams.orientation,os:"web",os_version:u.default.getOS().version,user:e.Profile.UserId,version:s.resourcesCampaignSpecialParams.version};e.Profile.Etag&&(t.etag=e.Profile.Etag);var n=Object.keys(t).map((function(e){return e+"="+t[e]})).join("&"),r=this.replaceWhitespaces(n,"+");return e.Config.ContentURL+"/"+s.resourcesCampaignURL+"?"+r},e.prototype.getResourcesAndCampaigns=function(){return r(this,void 0,void 0,(function(){var e;return o(this,(function(t){return e=this.resourceAndCampaignRequestUrl(l.default.getCurrentInstance()),[2,c.default.get(e)]}))}))},e.prototype.replaceWhitespaces=function(e,t){return e.replace(/\s/g,t)},e}();t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resourcesCampaignURL="api/1/user_content",t.resourcesCampaignSpecialParams={app_store:"web",orientation:"both",version:"7"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.DeviceID="device_id",e.InstallDate="install_date"}(t.GlobalNamespaceKeys||(t.GlobalNamespaceKeys={})),function(e){e.UserID="user_id"}(t.ExternalUserNamespaceKeys||(t.ExternalUserNamespaceKeys={})),function(e){e.Events="events",e.FirstSession="first_session",e.LastSession="last_session",e.LastETag="last_etag",e.Seqnum="seqnum",e.LastFlushFrequency="last_flush_frequency",e.LastFlushRefreshDelay="last_flush_refresh_delay",e.LastWebPushPublicKey="last_web_push_public_key",e.QAStatus="qa_status"}(t.UserNamespaceKeys||(t.UserNamespaceKeys={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=function(){function e(){this.dbName=r.swrveDefaultDBName,this.dbVersion=r.swrveDefaultDBVersion,this.local=localStorage}return e.clear=function(){localStorage.clear()},e.prototype.writeLocal=function(e,t){var n=this.serialize(t);this.local.setItem(e,n)},e.prototype.readLocal=function(e){var t=this.local.getItem(e);return null===t?null:this.deserialize(t)},e.prototype.deleteLocal=function(e){return this.local.removeItem(e)},e.prototype.localKeys=function(){for(var e=[],t=0;t<this.local.length;t+=1)e.push(this.local.key(t));return e},e.prototype.serialize=function(e){return"string"==typeof e?e:JSON.stringify(e)},e.prototype.deserialize=function(e){var t=null;try{t=JSON.parse(e)}catch(n){t=e}return t},e.initailized=!1,e}();t.default=o},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,a)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(25)),a=i(n(5)),u=i(n(4)),c=n(3),f=i(n(0)),l=function(){function e(e,t,n,r){var o=u.default.getCurrentInstance(),i=o?o.InstallDate:void 0,c=o?o.DeviceId:void 0;this.userID=n,this.installDate=i,this.deviceID=c,this.sessionToken=r,this.swrveConfig=e,this.flushConfig=t,this.isSending=!1,this.localStorageClient=new a.default,this.eventAPIClient=new s.default(e.ApiURL,this.userID,this.deviceID)}return e.prototype.init=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.processInBackground()];case 1:return e.sent(),[2]}}))}))},e.prototype.shutdown=function(){clearTimeout(this.timeoutProcess);try{this.sendEvents()}catch(e){f.default.errorMsg("SwrveSDK - could not clear events before shutdown"),f.default.errorMsg(e)}this.timeoutProcess=void 0},e.prototype.deleteEvents=function(e){var t=this;f.default.infoMsg("Deleting Events from Queue"),e.forEach((function(e){t.localStorageClient.deleteEventOnQueue(e)}))},e.prototype.sendEvents=function(){return r(this,void 0,void 0,(function(){var e,t,n,r,i,s,a=this;return o(this,(function(o){switch(o.label){case 0:if(e=this.localStorageClient.fetchEventsFromQueue(this.userID),t=this.localStorageClient.fetchEventKeys(this.userID),n=function(e){a.deleteEvents(t)},r=function(e){e.statusCode<500?a.deleteEvents(t):f.default.errorMsg("Swrve API responded with status code: "+e.statusCode+" and body: "+e.jsonBody+". Leaving events in queue")},i={apiURL:this.swrveConfig.ApiURL,appVersion:this.swrveConfig.AppVersion,deviceID:this.deviceID,sessionToken:this.sessionToken,userId:this.userID},this.isSending)return f.default.warnMsg("Swrve Event Queue is still sending..."),[2];this.isSending=!0,o.label=1;case 1:return o.trys.push([1,4,5,6]),e.length>0?[4,this.eventAPIClient.sendEventBatch(i,e,n,r)]:[3,3];case 2:o.sent(),o.label=3;case 3:return[3,6];case 4:return s=o.sent(),f.default.warnMsg("There was an error sending the event batch"),f.default.warnMsg(s),[3,6];case 5:return this.isSending=!1,[7];case 6:return[2]}}))}))},e.prototype.sendQAEvents=function(e){return r(this,void 0,void 0,(function(){var t,n,r,i,s;return o(this,(function(o){switch(o.label){case 0:t=JSON.stringify(e),f.default.infoMsg("Sending QA event..."+t),n=function(e){f.default.infoMsg("QA event successfully sent: "+t)},r=function(e){f.default.warnMsg("QA event sending failed, status code: "+e.statusCode+" and body:"+e.jsonBody+" event data:"+t)},i={apiURL:this.swrveConfig.ApiURL,appVersion:this.swrveConfig.AppVersion,deviceID:this.deviceID,sessionToken:this.sessionToken,userId:this.userID},o.label=1;case 1:return o.trys.push([1,4,5,6]),e.length>0?[4,this.eventAPIClient.sendEventBatch(i,e,n,r)]:[3,3];case 2:o.sent(),o.label=3;case 3:return[3,6];case 4:return s=o.sent(),f.default.warnMsg("There was an error sending the QA event"),f.default.warnMsg(s),[3,6];case 5:return f.default.infoMsg("Finsihed QA event sending"),[7];case 6:return[2]}}))}))},e.prototype.processInBackground=function(){return r(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:if(this.isProcessing)return f.default.warnMsg("EventQueueManager is already processing"),[2,null];this.setAsStarted(),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.sendEvents()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),f.default.errorMsg("SwrveSDK - An error has occured processing events"),f.default.errorMsg(e),[3,4];case 4:return this.setAsStopped(),this.timeoutProcess=window.setTimeout(this.processInBackground.bind(this),this.flushConfig.flushFrequency),[2]}}))}))},e.prototype.setAsStarted=function(){this.isProcessing=!0,this.lastProcessingStart=c.nowInUtcTime()},e.prototype.setAsStopped=function(){this.isProcessing=!1,this.lastProcessingStop=c.nowInUtcTime()},e}();t.default=l},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,a)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),a=i(n(10)),u=function(){function e(e,t,n){this.apiVersion=1,this.eventBatchUriPath="/batch",this.baseUrl=new URL(this.apiVersion.toString(),e).toString(),this.deviceId=n,this.userId=t}return e.prototype.sendEventBatch=function(e,t,n,i){return r(this,void 0,void 0,(function(){var r;return o(this,(function(o){switch(o.label){case 0:return(r=this.eventBatchRequestParams(e)).body.data=t,[4,a.default.post(r.url,r.body,n,i)];case 1:return[2,o.sent()]}}))}))},e.prototype.eventBatchRequestParams=function(e){return{url:""+this.baseUrl+this.eventBatchUriPath,body:this.requestBodyPrototype(e)}},e.prototype.requestBodyPrototype=function(e){var t={};return t.session_token=e.sessionToken,t.app_version=e.appVersion,t.user=this.userId,t.unique_device_id=this.deviceId,t.version=s.swrveVersion,t},e}();t.default=u},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(8),i=r(n(9)),s=function(){function e(){}return e.isTrackingSupported=function(){var e=i.default.getOS(),t=i.default.getBrowserInfo();return null!=t.name&&null!=t.version&&!(o.browserBlackList.includes(t.name)||o.osBlackList.includes(e.name))},e}();t.default=s},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,a)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(10)),a=i(n(5)),u=n(3),c=n(2),f=i(n(0)),l=n(13),p=function(){function e(e){var t=null,n=this.getSwrveProfileFromExternalUserId(e);null!=n&&void 0!==n?(t=n,this.externalUserId=t.extUserId,this.userId=t.userId,this.firstSession=t.firstSession,this.lastSession=t.lastSession,this.seqnum=t.seqnum,this.isQA=t.qa,t.etag&&(this.etag=t.etag),this.isIdentityResolved=!0):(f.default.infoMsg("No Profile Found In Storage. Calling identify API"),this.isIdentityResolved=!1)}return Object.defineProperty(e.prototype,"ExternalUserId",{get:function(){return this.externalUserId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"UserId",{get:function(){return this.userId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FirstSession",{get:function(){return this.firstSession},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"LastSession",{get:function(){return this.lastSession},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Seqnum",{get:function(){return this.seqnum},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Etag",{get:function(){return this.etag},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsQA",{get:function(){return this.isQA},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsIdentityResolved",{get:function(){return this.isIdentityResolved},enumerable:!0,configurable:!0}),e.prototype.callIdentifyOnExternalUserId=function(e,t){return r(this,void 0,void 0,(function(){var n,r,i,a,p,h;return o(this,(function(o){switch(o.label){case 0:n=l.generateUuid().toString(),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,s.default.post(t.Config.IdentifyURL,{api_key:t.Config.ApiKey,swrve_id:n,external_user_id:e,unique_device_id:t.DeviceId})];case 2:return void 0!==(r=o.sent()).jsonBody&&200===r.statusCode?(i=JSON.parse(r.jsonBody),a={extUserId:e,firstSession:u.nowInUtcTime(),qa:!1,seqnum:0,userId:i.swrve_id},this.externalUserId=a.extUserId,this.userId=a.userId,this.firstSession=a.firstSession,this.lastSession=a.lastSession,this.seqnum=a.seqnum,this.isQA=a.qa,this.isIdentityResolved=!0,this.saveSwrveProfileToStorage(a)):(p=c.isNil(r.jsonBody)?"with no message.":" message: "+r.jsonBody,f.default.errorMsg("Identify failed: "+r.statusCode+" :: "+p)),[3,4];case 3:return h=o.sent(),f.default.errorMsg(h),[3,4];case 4:return[2]}}))}))},e.prototype.setEtag=function(e){this.etag=e},e.prototype.setQAFlag=function(e){this.isQA=e},e.prototype.getSwrveProfileFromExternalUserId=function(t){try{var n=e.getSwrveProfileFromStorage(t);return!c.isNil(n)&&this.isValidResultProfile(n)?(f.default.infoMsg("Received from Storage: "+n.userId+" | "+n.extUserId+" | "+n.seqnum+" | "+n.firstSession+" | "+n.lastSession+" | "+n.etag),n):null}catch(e){return f.default.errorMsg(e),null}},e.prototype.updateSeqnum=function(){return this.seqnum=this.seqnum+1,this.seqnum},e.prototype.saveBeforeSessionEnd=function(){this.lastSession=u.nowInUtcTime();var e={extUserId:this.externalUserId,firstSession:this.firstSession,lastSession:this.lastSession,qa:this.isQA,seqnum:this.seqnum,userId:this.userId};this.etag&&(e.etag=this.etag),this.saveSwrveProfileToStorage(e)},e.getSwrveProfileFromStorage=function(e){var t=new a.default,n=t.fetchUserID(e);return{etag:t.fetchLastETag(n),extUserId:e,firstSession:t.fetchFirstSession(n),lastSession:t.fetchLastSession(n),qa:t.fetchQAStatus(n),seqnum:t.fetchSeqnum(n),userId:n}},e.prototype.saveSwrveProfileToStorage=function(e){var t=new a.default;t.storeUserID(e.extUserId,e.userId),t.storeSeqnum(e.userId,e.seqnum),t.storeFirstSession(e.userId,e.firstSession),t.storeQAStatus(e.userId,e.qa),e.lastSession&&t.storeLastSession(e.userId,e.lastSession),e.etag&&t.storeLastETag(e.userId,e.etag)},e.prototype.isValidResultProfile=function(e){return!(c.isNil(e.userId)||c.isNil(e.extUserId)||c.isNil(e.firstSession)||c.isNil(e.seqnum))},e}();t.default=p},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,a)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(11)),a=n(29),u=n(2),c=i(n(0));t.serviceWorkerEventTypes={swrvePushNotificationClicked:"swrve.push_clicked",swrvePushNotificationClosed:"swrve.push_closed",swrvePushReceived:"swrve.push_receieved"};var f=function(){function e(e,t,n,r,o){this.config=e,this.isInitialised=!1,this.webPushApiKey=t,this.callBackPushRecieved=n,this.callBackPushClicked=r,this.callBackPushClosed=o}return Object.defineProperty(e.prototype,"IsInitialised",{get:function(){return this.isInitialised},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"WebPushApiKey",{get:function(){return this.webPushApiKey},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.IsInitialised?c.default.infoMsg("SwrvePushManager :: Already Initialised"):this.isPushSupported()?this.isInitialised=!0:c.default.infoMsg("SwrvePushManager :: Push is not supported")},e.prototype.registerPush=function(e,t){var n=this;if(this.isPushSupported()){this.check();var r=u.isNil(e)?u.noOp:e,o=u.isNil(t)?u.noOp:t,i=this.config.ServiceWorker;navigator.serviceWorker.register(i).then((function(e){c.default.infoMsg("Registering service worker: "+i),c.default.infoMsg(e),e.pushManager.getSubscription().then((function(t){if(!u.isNil(t))return c.default.infoMsg("Already subscribed to push"),n.sendPushRegistrationProperties(t),void r();c.default.infoMsg("Attempting to subscribe to push");var i={applicationServerKey:a.base64UrlToUint8Array(n.WebPushApiKey),userVisibleOnly:n.config.UserVisibleOnly};e.pushManager.subscribe(i).then((function(e){n.sendPushRegistrationProperties(e),c.default.infoMsg("Subscribed Successfully"),r()})).catch((function(e){c.default.errorMsg("Subcription to push failed"),c.default.errorMsg(e),o(e)}))})).catch((function(e){c.default.errorMsg("Cannot get Push Subscription Information"),c.default.errorMsg(e),o(e)}))})),this.registerPushListeners()}},e.prototype.unregisterPush=function(e,t){if(this.isPushSupported()){this.check();var n=u.isNil(e)?u.noOp:e,r=u.isNil(t)?u.noOp:t,o=function(e){c.default.errorMsg(e),r(e)};navigator.serviceWorker.ready.then((function(e){e.pushManager.getSubscription().then((function(e){u.isNil(e)?c.default.warnMsg("Could not unregister push. No subscription found"):e.unsubscribe().then((function(){navigator.serviceWorker.getRegistrations().then((function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];c.default.infoMsg("Unregistering from Service Worker"),c.default.infoMsg(r),r.unregister()}})),n()})).catch((function(e){c.default.errorMsg("Error unsubscribing from push"),o(e)}))})).catch((function(e){c.default.errorMsg("Error fetching existing subscription"),o(e)}))}))}},e.prototype.isPushSupported=function(){return"serviceWorker"in navigator&&"PushManager"in window},e.prototype.onPushReceived=function(e){return c.default.infoMsg("Notification Received"),u.isNil(this.callBackPushRecieved)?null:this.callBackPushRecieved(e)},e.prototype.onPushClicked=function(e){return c.default.infoMsg("Notification Clicked"),c.default.infoMsg(e),u.isPresent(e.data)&&u.isPresent(e.data.body.id)&&s.default.checkInstance().pushNotificationEngagedEvent(e.data.body.id,e.data.body.deeplink),u.isNil(this.callBackPushClicked)?null:this.callBackPushClicked(e)},e.prototype.onPushClosed=function(e){return c.default.infoMsg("Notification Closed"),u.isNil(this.callBackPushClosed)?null:this.callBackPushClosed(e)},e.prototype.registerPushListeners=function(){var e=this;navigator.serviceWorker.removeEventListener("message",this.pushHandler),navigator.serviceWorker.addEventListener("message",function(t){e.pushHandler(t)}.bind(this),!1)},e.prototype.pushHandler=function(e){c.default.infoMsg("PushManager receieved message event"),c.default.infoMsg(e);var n=e.data;if(u.isNil(n))c.default.errorMsg("Could not parse message from service worker");else switch(n.type){case t.serviceWorkerEventTypes.swrvePushReceived:this.onPushReceived(e);break;case t.serviceWorkerEventTypes.swrvePushNotificationClicked:this.onPushClicked(e);break;case t.serviceWorkerEventTypes.swrvePushNotificationClosed:this.onPushClosed(e)}},e.prototype.check=function(){if(!this.IsInitialised)throw new Error("SwrvePushManager Not Initialised!")},e.prototype.sendPushRegistrationProperties=function(e){var t=e.toJSON(),n=t.keys.auth,r=t.keys.p256dh,o=t.endpoint;this.webPushToken=o+"|"+r+"|"+n,c.default.infoMsg("sending push registration properties : "+this.webPushToken),c.default.infoMsg(t),s.default.userUpdate({"swrve.web_push_token":this.webPushToken}),this.sendBrowserPermissions(e)},e.prototype.sendBrowserPermissions=function(e){return r(this,void 0,void 0,(function(){var e=this;return o(this,(function(t){switch(t.label){case 0:return this.browserHasPermissionsAccess()?[4,navigator.permissions.query({name:"notifications"}).then((function(t){c.default.infoMsg("notifications permission status is  "+t.state),e.sendPermissionsUpdate(t.state),t.onchange=function(t){c.default.infoMsg("notifications permission status has changed to "+t.target.state),e.sendPermissionsUpdate(t.target.state)}}))]:[3,2];case 1:return t.sent(),[3,3];case 2:c.default.warnMsg("notifications permission status is unknown"),this.sendPermissionsUpdate("unknown"),t.label=3;case 3:return[2]}}))}))},e.prototype.sendPermissionsUpdate=function(e){s.default.userUpdate({"swrve.permission.web.push_notifications":e})},e.prototype.browserHasPermissionsAccess=function(){return void 0!==navigator.permissions},e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.base64UrlToUint8Array=function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),r=new Uint8Array(n.length),o=0;o<n.length;o+=1)r[o]=n.charCodeAt(o);return r}}])},84933:function(e,t,n){var r=n(45001),o=n(96291),i=n(67073),s=r.TypeError;e.exports=function(e){if(o(e))return e;throw s(i(e)+" is not a function")}},18209:function(e,t,n){var r=n(45001),o=n(61814),i=n(67073),s=r.TypeError;e.exports=function(e){if(o(e))return e;throw s(i(e)+" is not a constructor")}},29076:function(e,t,n){var r=n(45001),o=n(96291),i=r.String,s=r.TypeError;e.exports=function(e){if("object"==typeof e||o(e))return e;throw s("Can't set "+i(e)+" as a prototype")}},25528:function(e,t,n){"use strict";var r=n(50189).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},72814:function(e,t,n){var r=n(45001),o=n(66282),i=r.TypeError;e.exports=function(e,t){if(o(t,e))return e;throw i("Incorrect invocation")}},4905:function(e,t,n){var r=n(45001),o=n(62366),i=r.String,s=r.TypeError;e.exports=function(e){if(o(e))return e;throw s(i(e)+" is not an object")}},5029:function(e,t,n){var r=n(40678),o=n(6971),i=n(44821),s=function(e){return function(t,n,s){var a,u=r(t),c=i(u),f=o(s,c);if(e&&n!=n){for(;c>f;)if((a=u[f++])!=a)return!0}else for(;c>f;f++)if((e||f in u)&&u[f]===n)return e||f||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},60650:function(e,t,n){var r=n(70936);e.exports=r([].slice)},13165:function(e,t,n){var r=n(46802)("iterator"),o=!1;try{var i=0,s={next:function(){return{done:!!i++}},return:function(){o=!0}};s[r]=function(){return this},Array.from(s,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(e){}return n}},75489:function(e,t,n){var r=n(70936),o=r({}.toString),i=r("".slice);e.exports=function(e){return i(o(e),8,-1)}},20486:function(e,t,n){var r=n(45001),o=n(68171),i=n(96291),s=n(75489),a=n(46802)("toStringTag"),u=r.Object,c="Arguments"==s(function(){return arguments}());e.exports=o?s:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=u(e),a))?n:c?s(t):"Object"==(r=s(t))&&i(t.callee)?"Arguments":r}},46810:function(e,t,n){var r=n(78382),o=n(62466),i=n(8117),s=n(56462);e.exports=function(e,t,n){for(var a=o(t),u=s.f,c=i.f,f=0;f<a.length;f++){var l=a[f];r(e,l)||n&&r(n,l)||u(e,l,c(t,l))}}},50430:function(e,t,n){var r=n(11502),o=n(56462),i=n(86034);e.exports=r?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},86034:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},11502:function(e,t,n){var r=n(25061);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},36009:function(e,t,n){var r=n(45001),o=n(62366),i=r.document,s=o(i)&&o(i.createElement);e.exports=function(e){return s?i.createElement(e):{}}},16837:function(e){e.exports="object"==typeof window},81368:function(e,t,n){var r=n(19966),o=n(45001);e.exports=/ipad|iphone|ipod/i.test(r)&&void 0!==o.Pebble},70311:function(e,t,n){var r=n(19966);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},10566:function(e,t,n){var r=n(75489),o=n(45001);e.exports="process"==r(o.process)},74832:function(e,t,n){var r=n(19966);e.exports=/web0s(?!.*chrome)/i.test(r)},19966:function(e,t,n){var r=n(3425);e.exports=r("navigator","userAgent")||""},42821:function(e,t,n){var r,o,i=n(45001),s=n(19966),a=i.process,u=i.Deno,c=a&&a.versions||u&&u.version,f=c&&c.v8;f&&(o=(r=f.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&s&&(!(r=s.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/))&&(o=+r[1]),e.exports=o},72089:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},29638:function(e,t,n){var r=n(45001),o=n(8117).f,i=n(50430),s=n(96313),a=n(88506),u=n(46810),c=n(91092);e.exports=function(e,t){var n,f,l,p,h,d=e.target,v=e.global,g=e.stat;if(n=v?r:g?r[d]||a(d,{}):(r[d]||{}).prototype)for(f in t){if(p=t[f],l=e.noTargetGet?(h=o(n,f))&&h.value:n[f],!c(v?f:d+(g?".":"#")+f,e.forced)&&void 0!==l){if(typeof p==typeof l)continue;u(p,l)}(e.sham||l&&l.sham)&&i(p,"sham",!0),s(n,f,p,e)}}},25061:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},95453:function(e,t,n){"use strict";n(42295);var r=n(70936),o=n(96313),i=n(44847),s=n(25061),a=n(46802),u=n(50430),c=a("species"),f=RegExp.prototype;e.exports=function(e,t,n,l){var p=a(e),h=!s((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),d=h&&!s((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[c]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!h||!d||n){var v=r(/./[p]),g=t(p,""[e],(function(e,t,n,o,s){var a=r(e),u=t.exec;return u===i||u===f.exec?h&&!s?{done:!0,value:v(t,n,o)}:{done:!0,value:a(n,t,o)}:{done:!1}}));o(String.prototype,e,g[0]),o(f,p,g[1])}l&&u(f[p],"sham",!0)}},25494:function(e,t,n){var r=n(58483),o=Function.prototype,i=o.apply,s=o.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?s.bind(i):function(){return s.apply(i,arguments)})},99918:function(e,t,n){var r=n(70936),o=n(84933),i=n(58483),s=r(r.bind);e.exports=function(e,t){return o(e),void 0===t?e:i?s(e,t):function(){return e.apply(t,arguments)}}},58483:function(e,t,n){var r=n(25061);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},63927:function(e,t,n){var r=n(58483),o=Function.prototype.call;e.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},9873:function(e,t,n){var r=n(11502),o=n(78382),i=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,a=o(i,"name"),u=a&&"something"===function(){}.name,c=a&&(!r||r&&s(i,"name").configurable);e.exports={EXISTS:a,PROPER:u,CONFIGURABLE:c}},70936:function(e,t,n){var r=n(58483),o=Function.prototype,i=o.bind,s=o.call,a=r&&i.bind(s,s);e.exports=r?function(e){return e&&a(e)}:function(e){return e&&function(){return s.apply(e,arguments)}}},3425:function(e,t,n){var r=n(45001),o=n(96291),i=function(e){return o(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?i(r[e]):r[e]&&r[e][t]}},26354:function(e,t,n){var r=n(20486),o=n(53815),i=n(80501),s=n(46802)("iterator");e.exports=function(e){if(null!=e)return o(e,s)||o(e,"@@iterator")||i[r(e)]}},48437:function(e,t,n){var r=n(45001),o=n(63927),i=n(84933),s=n(4905),a=n(67073),u=n(26354),c=r.TypeError;e.exports=function(e,t){var n=arguments.length<2?u(e):t;if(i(n))return s(o(n,e));throw c(a(e)+" is not iterable")}},53815:function(e,t,n){var r=n(84933);e.exports=function(e,t){var n=e[t];return null==n?void 0:r(n)}},18327:function(e,t,n){var r=n(70936),o=n(87615),i=Math.floor,s=r("".charAt),a=r("".replace),u=r("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,f=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,r,l,p){var h=n+e.length,d=r.length,v=f;return void 0!==l&&(l=o(l),v=c),a(p,v,(function(o,a){var c;switch(s(a,0)){case"$":return"$";case"&":return e;case"`":return u(t,0,n);case"'":return u(t,h);case"<":c=l[u(a,1,-1)];break;default:var f=+a;if(0===f)return o;if(f>d){var p=i(f/10);return 0===p?o:p<=d?void 0===r[p-1]?s(a,1):r[p-1]+s(a,1):o}c=r[f-1]}return void 0===c?"":c}))}},45001:function(e,t,n){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},78382:function(e,t,n){var r=n(70936),o=n(87615),i=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return i(o(e),t)}},92499:function(e){e.exports={}},53455:function(e,t,n){var r=n(45001);e.exports=function(e,t){var n=r.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}},12118:function(e,t,n){var r=n(3425);e.exports=r("document","documentElement")},17788:function(e,t,n){var r=n(11502),o=n(25061),i=n(36009);e.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},62901:function(e,t,n){var r=n(45001),o=n(70936),i=n(25061),s=n(75489),a=r.Object,u=o("".split);e.exports=i((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"==s(e)?u(e,""):a(e)}:a},685:function(e,t,n){var r=n(70936),o=n(96291),i=n(19982),s=r(Function.toString);o(i.inspectSource)||(i.inspectSource=function(e){return s(e)}),e.exports=i.inspectSource},50684:function(e,t,n){var r,o,i,s=n(77650),a=n(45001),u=n(70936),c=n(62366),f=n(50430),l=n(78382),p=n(19982),h=n(61695),d=n(92499),v="Object already initialized",g=a.TypeError,y=a.WeakMap;if(s||p.state){var b=p.state||(p.state=new y),m=u(b.get),w=u(b.has),S=u(b.set);r=function(e,t){if(w(b,e))throw new g(v);return t.facade=e,S(b,e,t),t},o=function(e){return m(b,e)||{}},i=function(e){return w(b,e)}}else{var _=h("state");d[_]=!0,r=function(e,t){if(l(e,_))throw new g(v);return t.facade=e,f(e,_,t),t},o=function(e){return l(e,_)?e[_]:{}},i=function(e){return l(e,_)}}e.exports={set:r,get:o,has:i,enforce:function(e){return i(e)?o(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=o(t)).type!==e)throw g("Incompatible receiver, "+e+" required");return n}}}},55557:function(e,t,n){var r=n(46802),o=n(80501),i=r("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||s[i]===e)}},96291:function(e){e.exports=function(e){return"function"==typeof e}},61814:function(e,t,n){var r=n(70936),o=n(25061),i=n(96291),s=n(20486),a=n(3425),u=n(685),c=function(){},f=[],l=a("Reflect","construct"),p=/^\s*(?:class|function)\b/,h=r(p.exec),d=!p.exec(c),v=function(e){if(!i(e))return!1;try{return l(c,f,e),!0}catch(e){return!1}},g=function(e){if(!i(e))return!1;switch(s(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!h(p,u(e))}catch(e){return!0}};g.sham=!0,e.exports=!l||o((function(){var e;return v(v.call)||!v(Object)||!v((function(){e=!0}))||e}))?g:v},91092:function(e,t,n){var r=n(25061),o=n(96291),i=/#|\.prototype\./,s=function(e,t){var n=u[a(e)];return n==f||n!=c&&(o(t)?r(t):!!t)},a=s.normalize=function(e){return String(e).replace(i,".").toLowerCase()},u=s.data={},c=s.NATIVE="N",f=s.POLYFILL="P";e.exports=s},62366:function(e,t,n){var r=n(96291);e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},20013:function(e){e.exports=!1},6448:function(e,t,n){var r=n(45001),o=n(3425),i=n(96291),s=n(66282),a=n(37558),u=r.Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=o("Symbol");return i(t)&&s(t.prototype,u(e))}},98971:function(e,t,n){var r=n(45001),o=n(99918),i=n(63927),s=n(4905),a=n(67073),u=n(55557),c=n(44821),f=n(66282),l=n(48437),p=n(26354),h=n(9200),d=r.TypeError,v=function(e,t){this.stopped=e,this.result=t},g=v.prototype;e.exports=function(e,t,n){var r,y,b,m,w,S,_,I=n&&n.that,E=!(!n||!n.AS_ENTRIES),P=!(!n||!n.IS_ITERATOR),x=!(!n||!n.INTERRUPTED),M=o(t,I),U=function(e){return r&&h(r,"normal",e),new v(!0,e)},O=function(e){return E?(s(e),x?M(e[0],e[1],U):M(e[0],e[1])):x?M(e,U):M(e)};if(P)r=e;else{if(!(y=p(e)))throw d(a(e)+" is not iterable");if(u(y)){for(b=0,m=c(e);m>b;b++)if((w=O(e[b]))&&f(g,w))return w;return new v(!1)}r=l(e,y)}for(S=r.next;!(_=i(S,r)).done;){try{w=O(_.value)}catch(e){h(r,"throw",e)}if("object"==typeof w&&w&&f(g,w))return w}return new v(!1)}},9200:function(e,t,n){var r=n(63927),o=n(4905),i=n(53815);e.exports=function(e,t,n){var s,a;o(e);try{if(!(s=i(e,"return"))){if("throw"===t)throw n;return n}s=r(s,e)}catch(e){a=!0,s=e}if("throw"===t)throw n;if(a)throw s;return o(s),n}},80501:function(e){e.exports={}},44821:function(e,t,n){var r=n(74479);e.exports=function(e){return r(e.length)}},43690:function(e,t,n){var r,o,i,s,a,u,c,f,l=n(45001),p=n(99918),h=n(8117).f,d=n(38680).set,v=n(70311),g=n(81368),y=n(74832),b=n(10566),m=l.MutationObserver||l.WebKitMutationObserver,w=l.document,S=l.process,_=l.Promise,I=h(l,"queueMicrotask"),E=I&&I.value;E||(r=function(){var e,t;for(b&&(e=S.domain)&&e.exit();o;){t=o.fn,o=o.next;try{t()}catch(e){throw o?s():i=void 0,e}}i=void 0,e&&e.enter()},v||b||y||!m||!w?!g&&_&&_.resolve?((c=_.resolve(void 0)).constructor=_,f=p(c.then,c),s=function(){f(r)}):b?s=function(){S.nextTick(r)}:(d=p(d,l),s=function(){d(r)}):(a=!0,u=w.createTextNode(""),new m(r).observe(u,{characterData:!0}),s=function(){u.data=a=!a})),e.exports=E||function(e){var t={fn:e,next:void 0};i&&(i.next=t),o||(o=t,s()),i=t}},42673:function(e,t,n){var r=n(45001);e.exports=r.Promise},99262:function(e,t,n){var r=n(42821),o=n(25061);e.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},77650:function(e,t,n){var r=n(45001),o=n(96291),i=n(685),s=r.WeakMap;e.exports=o(s)&&/native code/.test(i(s))},37714:function(e,t,n){"use strict";var r=n(84933),o=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new o(e)}},22275:function(e,t,n){var r,o=n(4905),i=n(56191),s=n(72089),a=n(92499),u=n(12118),c=n(36009),f=n(61695),l=f("IE_PROTO"),p=function(){},h=function(e){return"<script>"+e+"</"+"script>"},d=function(e){e.write(h("")),e.close();var t=e.parentWindow.Object;return e=null,t},v=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}var e,t;v="undefined"!=typeof document?document.domain&&r?d(r):((t=c("iframe")).style.display="none",u.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(h("document.F=Object")),e.close(),e.F):d(r);for(var n=s.length;n--;)delete v.prototype[s[n]];return v()};a[l]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(p.prototype=o(e),n=new p,p.prototype=null,n[l]=e):n=v(),void 0===t?n:i.f(n,t)}},56191:function(e,t,n){var r=n(11502),o=n(75780),i=n(56462),s=n(4905),a=n(40678),u=n(89749);t.f=r&&!o?Object.defineProperties:function(e,t){s(e);for(var n,r=a(t),o=u(t),c=o.length,f=0;c>f;)i.f(e,n=o[f++],r[n]);return e}},56462:function(e,t,n){var r=n(45001),o=n(11502),i=n(17788),s=n(75780),a=n(4905),u=n(91030),c=r.TypeError,f=Object.defineProperty,l=Object.getOwnPropertyDescriptor,p="enumerable",h="configurable",d="writable";t.f=o?s?function(e,t,n){if(a(e),t=u(t),a(n),"function"==typeof e&&"prototype"===t&&"value"in n&&d in n&&!n.writable){var r=l(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:h in n?n.configurable:r.configurable,enumerable:p in n?n.enumerable:r.enumerable,writable:!1})}return f(e,t,n)}:f:function(e,t,n){if(a(e),t=u(t),a(n),i)try{return f(e,t,n)}catch(e){}if("get"in n||"set"in n)throw c("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},8117:function(e,t,n){var r=n(11502),o=n(63927),i=n(49265),s=n(86034),a=n(40678),u=n(91030),c=n(78382),f=n(17788),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=a(e),t=u(t),f)try{return l(e,t)}catch(e){}if(c(e,t))return s(!o(i.f,e,t),e[t])}},59219:function(e,t,n){var r=n(23855),o=n(72089).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},72822:function(e,t){t.f=Object.getOwnPropertySymbols},66282:function(e,t,n){var r=n(70936);e.exports=r({}.isPrototypeOf)},23855:function(e,t,n){var r=n(70936),o=n(78382),i=n(40678),s=n(5029).indexOf,a=n(92499),u=r([].push);e.exports=function(e,t){var n,r=i(e),c=0,f=[];for(n in r)!o(a,n)&&o(r,n)&&u(f,n);for(;t.length>c;)o(r,n=t[c++])&&(~s(f,n)||u(f,n));return f}},89749:function(e,t,n){var r=n(23855),o=n(72089);e.exports=Object.keys||function(e){return r(e,o)}},49265:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);t.f=o?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},22848:function(e,t,n){var r=n(70936),o=n(4905),i=n(29076);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return o(n),i(r),t?e(n,r):n.__proto__=r,n}}():void 0)},45085:function(e,t,n){"use strict";var r=n(68171),o=n(20486);e.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},50379:function(e,t,n){var r=n(45001),o=n(63927),i=n(96291),s=n(62366),a=r.TypeError;e.exports=function(e,t){var n,r;if("string"===t&&i(n=e.toString)&&!s(r=o(n,e)))return r;if(i(n=e.valueOf)&&!s(r=o(n,e)))return r;if("string"!==t&&i(n=e.toString)&&!s(r=o(n,e)))return r;throw a("Can't convert object to primitive value")}},62466:function(e,t,n){var r=n(3425),o=n(70936),i=n(59219),s=n(72822),a=n(4905),u=o([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(a(e)),n=s.f;return n?u(t,n(e)):t}},37040:function(e){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},47504:function(e,t,n){var r=n(4905),o=n(62366),i=n(37714);e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},28791:function(e){var t=function(){this.head=null,this.tail=null};t.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}},e.exports=t},86846:function(e,t,n){var r=n(96313);e.exports=function(e,t,n){for(var o in t)r(e,o,t[o],n);return e}},96313:function(e,t,n){var r=n(45001),o=n(96291),i=n(78382),s=n(50430),a=n(88506),u=n(685),c=n(50684),f=n(9873).CONFIGURABLE,l=c.get,p=c.enforce,h=String(String).split("String");(e.exports=function(e,t,n,u){var c,l=!!u&&!!u.unsafe,d=!!u&&!!u.enumerable,v=!!u&&!!u.noTargetGet,g=u&&void 0!==u.name?u.name:t;o(n)&&("Symbol("===String(g).slice(0,7)&&(g="["+String(g).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!i(n,"name")||f&&n.name!==g)&&s(n,"name",g),(c=p(n)).source||(c.source=h.join("string"==typeof g?g:""))),e!==r?(l?!v&&e[t]&&(d=!0):delete e[t],d?e[t]=n:s(e,t,n)):d?e[t]=n:a(t,n)})(Function.prototype,"toString",(function(){return o(this)&&l(this).source||u(this)}))},41847:function(e,t,n){var r=n(45001),o=n(63927),i=n(4905),s=n(96291),a=n(75489),u=n(44847),c=r.TypeError;e.exports=function(e,t){var n=e.exec;if(s(n)){var r=o(n,e,t);return null!==r&&i(r),r}if("RegExp"===a(e))return o(u,e,t);throw c("RegExp#exec called on incompatible receiver")}},44847:function(e,t,n){"use strict";var r,o,i=n(63927),s=n(70936),a=n(89284),u=n(5268),c=n(4764),f=n(6809),l=n(22275),p=n(50684).get,h=n(21406),d=n(63069),v=f("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,y=g,b=s("".charAt),m=s("".indexOf),w=s("".replace),S=s("".slice),_=(o=/b*/g,i(g,r=/a/,"a"),i(g,o,"a"),0!==r.lastIndex||0!==o.lastIndex),I=c.BROKEN_CARET,E=void 0!==/()??/.exec("")[1];(_||E||I||h||d)&&(y=function(e){var t,n,r,o,s,c,f,h=this,d=p(h),P=a(e),x=d.raw;if(x)return x.lastIndex=h.lastIndex,t=i(y,x,P),h.lastIndex=x.lastIndex,t;var M=d.groups,U=I&&h.sticky,O=i(u,h),A=h.source,R=0,T=P;if(U&&(O=w(O,"y",""),-1===m(O,"g")&&(O+="g"),T=S(P,h.lastIndex),h.lastIndex>0&&(!h.multiline||h.multiline&&"\n"!==b(P,h.lastIndex-1))&&(A="(?: "+A+")",T=" "+T,R++),n=new RegExp("^(?:"+A+")",O)),E&&(n=new RegExp("^"+A+"$(?!\\s)",O)),_&&(r=h.lastIndex),o=i(g,U?n:h,T),U?o?(o.input=S(o.input,R),o[0]=S(o[0],R),o.index=h.lastIndex,h.lastIndex+=o[0].length):h.lastIndex=0:_&&o&&(h.lastIndex=h.global?o.index+o[0].length:r),E&&o&&o.length>1&&i(v,o[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(o[s]=void 0)})),o&&M)for(o.groups=c=l(null),s=0;s<M.length;s++)c[(f=M[s])[0]]=o[f[1]];return o}),e.exports=y},5268:function(e,t,n){"use strict";var r=n(4905);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},4764:function(e,t,n){var r=n(25061),o=n(45001).RegExp,i=r((function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),s=i||r((function(){return!o("a","y").sticky})),a=i||r((function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:a,MISSED_STICKY:s,UNSUPPORTED_Y:i}},21406:function(e,t,n){var r=n(25061),o=n(45001).RegExp;e.exports=r((function(){var e=o(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},63069:function(e,t,n){var r=n(25061),o=n(45001).RegExp;e.exports=r((function(){var e=o("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},64475:function(e,t,n){var r=n(45001).TypeError;e.exports=function(e){if(null==e)throw r("Can't call method on "+e);return e}},88506:function(e,t,n){var r=n(45001),o=Object.defineProperty;e.exports=function(e,t){try{o(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},53126:function(e,t,n){"use strict";var r=n(3425),o=n(56462),i=n(46802),s=n(11502),a=i("species");e.exports=function(e){var t=r(e),n=o.f;s&&t&&!t[a]&&n(t,a,{configurable:!0,get:function(){return this}})}},40606:function(e,t,n){var r=n(56462).f,o=n(78382),i=n(46802)("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!o(e,i)&&r(e,i,{configurable:!0,value:t})}},61695:function(e,t,n){var r=n(6809),o=n(41050),i=r("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},19982:function(e,t,n){var r=n(45001),o=n(88506),i="__core-js_shared__",s=r[i]||o(i,{});e.exports=s},6809:function(e,t,n){var r=n(20013),o=n(19982);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.21.1",mode:r?"pure":"global",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})},63571:function(e,t,n){var r=n(4905),o=n(18209),i=n(46802)("species");e.exports=function(e,t){var n,s=r(e).constructor;return void 0===s||null==(n=r(s)[i])?t:o(n)}},50189:function(e,t,n){var r=n(70936),o=n(89398),i=n(89284),s=n(64475),a=r("".charAt),u=r("".charCodeAt),c=r("".slice),f=function(e){return function(t,n){var r,f,l=i(s(t)),p=o(n),h=l.length;return p<0||p>=h?e?"":void 0:(r=u(l,p))<55296||r>56319||p+1===h||(f=u(l,p+1))<56320||f>57343?e?a(l,p):r:e?c(l,p,p+2):f-56320+(r-55296<<10)+65536}};e.exports={codeAt:f(!1),charAt:f(!0)}},38680:function(e,t,n){var r,o,i,s,a=n(45001),u=n(25494),c=n(99918),f=n(96291),l=n(78382),p=n(25061),h=n(12118),d=n(60650),v=n(36009),g=n(57427),y=n(70311),b=n(10566),m=a.setImmediate,w=a.clearImmediate,S=a.process,_=a.Dispatch,I=a.Function,E=a.MessageChannel,P=a.String,x=0,M={},U="onreadystatechange";try{r=a.location}catch(e){}var O=function(e){if(l(M,e)){var t=M[e];delete M[e],t()}},A=function(e){return function(){O(e)}},R=function(e){O(e.data)},T=function(e){a.postMessage(P(e),r.protocol+"//"+r.host)};m&&w||(m=function(e){g(arguments.length,1);var t=f(e)?e:I(e),n=d(arguments,1);return M[++x]=function(){u(t,void 0,n)},o(x),x},w=function(e){delete M[e]},b?o=function(e){S.nextTick(A(e))}:_&&_.now?o=function(e){_.now(A(e))}:E&&!y?(s=(i=new E).port2,i.port1.onmessage=R,o=c(s.postMessage,s)):a.addEventListener&&f(a.postMessage)&&!a.importScripts&&r&&"file:"!==r.protocol&&!p(T)?(o=T,a.addEventListener("message",R,!1)):o=U in v("script")?function(e){h.appendChild(v("script")).onreadystatechange=function(){h.removeChild(this),O(e)}}:function(e){setTimeout(A(e),0)}),e.exports={set:m,clear:w}},6971:function(e,t,n){var r=n(89398),o=Math.max,i=Math.min;e.exports=function(e,t){var n=r(e);return n<0?o(n+t,0):i(n,t)}},40678:function(e,t,n){var r=n(62901),o=n(64475);e.exports=function(e){return r(o(e))}},89398:function(e){var t=Math.ceil,n=Math.floor;e.exports=function(e){var r=+e;return r!=r||0===r?0:(r>0?n:t)(r)}},74479:function(e,t,n){var r=n(89398),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},87615:function(e,t,n){var r=n(45001),o=n(64475),i=r.Object;e.exports=function(e){return i(o(e))}},76973:function(e,t,n){var r=n(45001),o=n(63927),i=n(62366),s=n(6448),a=n(53815),u=n(50379),c=n(46802),f=r.TypeError,l=c("toPrimitive");e.exports=function(e,t){if(!i(e)||s(e))return e;var n,r=a(e,l);if(r){if(void 0===t&&(t="default"),n=o(r,e,t),!i(n)||s(n))return n;throw f("Can't convert object to primitive value")}return void 0===t&&(t="number"),u(e,t)}},91030:function(e,t,n){var r=n(76973),o=n(6448);e.exports=function(e){var t=r(e,"string");return o(t)?t:t+""}},68171:function(e,t,n){var r={};r[n(46802)("toStringTag")]="z",e.exports="[object z]"===String(r)},89284:function(e,t,n){var r=n(45001),o=n(20486),i=r.String;e.exports=function(e){if("Symbol"===o(e))throw TypeError("Cannot convert a Symbol value to a string");return i(e)}},67073:function(e,t,n){var r=n(45001).String;e.exports=function(e){try{return r(e)}catch(e){return"Object"}}},41050:function(e,t,n){var r=n(70936),o=0,i=Math.random(),s=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++o+i,36)}},37558:function(e,t,n){var r=n(99262);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},75780:function(e,t,n){var r=n(11502),o=n(25061);e.exports=r&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},57427:function(e,t,n){var r=n(45001).TypeError;e.exports=function(e,t){if(e<t)throw r("Not enough arguments");return e}},46802:function(e,t,n){var r=n(45001),o=n(6809),i=n(78382),s=n(41050),a=n(99262),u=n(37558),c=o("wks"),f=r.Symbol,l=f&&f.for,p=u?f:f&&f.withoutSetter||s;e.exports=function(e){if(!i(c,e)||!a&&"string"!=typeof c[e]){var t="Symbol."+e;a&&i(f,e)?c[e]=f[e]:c[e]=u&&l?l(t):p(t)}return c[e]}},92274:function(e,t,n){var r=n(68171),o=n(96313),i=n(45085);r||o(Object.prototype,"toString",i,{unsafe:!0})},63045:function(e,t,n){"use strict";var r,o,i,s,a=n(29638),u=n(20013),c=n(45001),f=n(3425),l=n(63927),p=n(42673),h=n(96313),d=n(86846),v=n(22848),g=n(40606),y=n(53126),b=n(84933),m=n(96291),w=n(62366),S=n(72814),_=n(685),I=n(98971),E=n(13165),P=n(63571),x=n(38680).set,M=n(43690),U=n(47504),O=n(53455),A=n(37714),R=n(37040),T=n(28791),k=n(50684),D=n(91092),L=n(46802),j=n(16837),C=n(10566),N=n(42821),W=L("species"),q="Promise",F=k.getterFor(q),K=k.set,Q=k.getterFor(q),V=p&&p.prototype,B=p,G=V,z=c.TypeError,H=c.document,$=c.process,Y=A.f,X=Y,J=!!(H&&H.createEvent&&c.dispatchEvent),Z=m(c.PromiseRejectionEvent),ee="unhandledrejection",te=!1,ne=D(q,(function(){var e=_(B),t=e!==String(B);if(!t&&66===N)return!0;if(u&&!G.finally)return!0;if(N>=51&&/native code/.test(e))return!1;var n=new B((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(n.constructor={})[W]=r,!(te=n.then((function(){}))instanceof r)||!t&&j&&!Z})),re=ne||!E((function(e){B.all(e).catch((function(){}))})),oe=function(e){var t;return!(!w(e)||!m(t=e.then))&&t},ie=function(e,t){var n,r,o,i=t.value,s=1==t.state,a=s?e.ok:e.fail,u=e.resolve,c=e.reject,f=e.domain;try{a?(s||(2===t.rejection&&fe(t),t.rejection=1),!0===a?n=i:(f&&f.enter(),n=a(i),f&&(f.exit(),o=!0)),n===e.promise?c(z("Promise-chain cycle")):(r=oe(n))?l(r,n,u,c):u(n)):c(i)}catch(e){f&&!o&&f.exit(),c(e)}},se=function(e,t){e.notified||(e.notified=!0,M((function(){for(var n,r=e.reactions;n=r.get();)ie(n,e);e.notified=!1,t&&!e.rejection&&ue(e)})))},ae=function(e,t,n){var r,o;J?((r=H.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),c.dispatchEvent(r)):r={promise:t,reason:n},!Z&&(o=c["on"+e])?o(r):e===ee&&O("Unhandled promise rejection",n)},ue=function(e){l(x,c,(function(){var t,n=e.facade,r=e.value;if(ce(e)&&(t=R((function(){C?$.emit("unhandledRejection",r,n):ae(ee,n,r)})),e.rejection=C||ce(e)?2:1,t.error))throw t.value}))},ce=function(e){return 1!==e.rejection&&!e.parent},fe=function(e){l(x,c,(function(){var t=e.facade;C?$.emit("rejectionHandled",t):ae("rejectionhandled",t,e.value)}))},le=function(e,t,n){return function(r){e(t,r,n)}},pe=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,se(e,!0))},he=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw z("Promise can't be resolved itself");var r=oe(t);r?M((function(){var n={done:!1};try{l(r,t,le(he,n,e),le(pe,n,e))}catch(t){pe(n,t,e)}})):(e.value=t,e.state=1,se(e,!1))}catch(t){pe({done:!1},t,e)}}};if(ne&&(G=(B=function(e){S(this,G),b(e),l(r,this);var t=F(this);try{e(le(he,t),le(pe,t))}catch(e){pe(t,e)}}).prototype,(r=function(e){K(this,{type:q,done:!1,notified:!1,parent:!1,reactions:new T,rejection:!1,state:0,value:void 0})}).prototype=d(G,{then:function(e,t){var n=Q(this),r=Y(P(this,B));return n.parent=!0,r.ok=!m(e)||e,r.fail=m(t)&&t,r.domain=C?$.domain:void 0,0==n.state?n.reactions.add(r):M((function(){ie(r,n)})),r.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r,t=F(e);this.promise=e,this.resolve=le(he,t),this.reject=le(pe,t)},A.f=Y=function(e){return e===B||e===i?new o(e):X(e)},!u&&m(p)&&V!==Object.prototype)){s=V.then,te||(h(V,"then",(function(e,t){var n=this;return new B((function(e,t){l(s,n,e,t)})).then(e,t)}),{unsafe:!0}),h(V,"catch",G.catch,{unsafe:!0}));try{delete V.constructor}catch(e){}v&&v(V,G)}a({global:!0,wrap:!0,forced:ne},{Promise:B}),g(B,q,!1,!0),y(q),i=f(q),a({target:q,stat:!0,forced:ne},{reject:function(e){var t=Y(this);return l(t.reject,void 0,e),t.promise}}),a({target:q,stat:!0,forced:u||ne},{resolve:function(e){return U(u&&this===i?B:this,e)}}),a({target:q,stat:!0,forced:re},{all:function(e){var t=this,n=Y(t),r=n.resolve,o=n.reject,i=R((function(){var n=b(t.resolve),i=[],s=0,a=1;I(e,(function(e){var u=s++,c=!1;a++,l(n,t,e).then((function(e){c||(c=!0,i[u]=e,--a||r(i))}),o)})),--a||r(i)}));return i.error&&o(i.value),n.promise},race:function(e){var t=this,n=Y(t),r=n.reject,o=R((function(){var o=b(t.resolve);I(e,(function(e){l(o,t,e).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}})},42295:function(e,t,n){"use strict";var r=n(29638),o=n(44847);r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},34994:function(e,t,n){"use strict";var r=n(25494),o=n(63927),i=n(70936),s=n(95453),a=n(25061),u=n(4905),c=n(96291),f=n(89398),l=n(74479),p=n(89284),h=n(64475),d=n(25528),v=n(53815),g=n(18327),y=n(41847),b=n(46802)("replace"),m=Math.max,w=Math.min,S=i([].concat),_=i([].push),I=i("".indexOf),E=i("".slice),P="$0"==="a".replace(/./,"$0"),x=!!/./[b]&&""===/./[b]("a","$0");s("replace",(function(e,t,n){var i=x?"$":"$0";return[function(e,n){var r=h(this),i=null==e?void 0:v(e,b);return i?o(i,e,r,n):o(t,p(r),e,n)},function(e,o){var s=u(this),a=p(e);if("string"==typeof o&&-1===I(o,i)&&-1===I(o,"$<")){var h=n(t,s,a,o);if(h.done)return h.value}var v=c(o);v||(o=p(o));var b=s.global;if(b){var P=s.unicode;s.lastIndex=0}for(var x=[];;){var M=y(s,a);if(null===M)break;if(_(x,M),!b)break;""===p(M[0])&&(s.lastIndex=d(a,l(s.lastIndex),P))}for(var U,O="",A=0,R=0;R<x.length;R++){for(var T=p((M=x[R])[0]),k=m(w(f(M.index),a.length),0),D=[],L=1;L<M.length;L++)_(D,void 0===(U=M[L])?U:String(U));var j=M.groups;if(v){var C=S([T],D,k,a);void 0!==j&&_(C,j);var N=p(r(o,void 0,C))}else N=g(T,a,k,D,j,o);k>=A&&(O+=E(a,A,k)+N,A=k+T.length)}return O+E(a,A)}]}),!!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!P||x)},11602:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),s=new U(r||[]);return i._invoke=function(e,t,n){var r=l;return function(o,i){if(r===h)throw new Error("Generator is already running");if(r===d){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var a=P(s,n);if(a){if(a===v)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var u=f(e,t,n);if("normal"===u.type){if(r=n.done?d:p,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}(e,n,s),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l="suspendedStart",p="suspendedYield",h="executing",d="completed",v={};function g(){}function y(){}function b(){}var m={};u(m,i,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(O([])));S&&S!==n&&r.call(S,i)&&(m=S);var _=b.prototype=g.prototype=Object.create(m);function I(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(o,i,s,a){var u=f(e[o],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(l).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,a)}))}a(u.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function P(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=f(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function U(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,s=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}return{next:A}}function A(){return{value:t,done:!0}}return y.prototype=b,u(_,"constructor",b),u(b,"constructor",y),y.displayName=u(b,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,a,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},I(E.prototype),u(E.prototype,s,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var s=new E(c(t,n,r,o),i);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},I(_),u(_,a,"Generator"),u(_,i,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=O,U.prototype={constructor:U,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return a.type="throw",a.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var u=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;M(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:O(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";n(92274),n(63045),n(11602);var e=n(78959),t=n.n(e);n(42295),n(34994);function r(e,t,n,r,o,i,s){try{var a=e[i](s),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,o)}!function(e,n){var o;e.behaviors.swrveNotifications={createInstance:(o=function(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var s=e.apply(t,n);function a(e){r(s,o,i,a,u,"next",e)}function u(e){r(s,o,i,a,u,"throw",e)}a(void 0)}))}}(regeneratorRuntime.mark((function e(){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){gigya.accounts.getAccountInfo({callback:function(t){e(t.data)}})}));case 2:r=e.sent,o=r.hasOwnProperty("member_no")&&r.hasOwnProperty("membership_type"),r.hasOwnProperty("adobeprefcenterguid")&&""!==r.adobeprefcenterguid&&o&&(i=r.member_no,s=r.membership_type,i&&s&&"member"===s.replace(/\s+/g,"").toLowerCase())&&t().createInstance({appId:n.swrve.appId,apiKey:n.swrve.apiKey,externalUserId:r.adobeprefcenterguid,stack:"eu",autoPushSubscribe:!0});case 5:case"end":return e.stop()}var i,s}),e)}))),function(){return o.apply(this,arguments)})}}(Drupal,drupalSettings)}()}();